<!DOCTYPE html>
<html lang="English">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端基础面试题(三) | Sorth Tong</title>
    <meta name="description" content="年少不被层楼误，余生不羁尽自由。">
    <link rel="icon" href="/test.png">
    
    <link rel="preload" href="/assets/css/0.styles.0ad23782.css" as="style"><link rel="preload" href="/assets/js/app.6e5cd8bf.js" as="script"><link rel="preload" href="/assets/js/2.f4f4c0ef.js" as="script"><link rel="preload" href="/assets/js/10.831e867e.js" as="script"><link rel="prefetch" href="/assets/js/11.39d09690.js"><link rel="prefetch" href="/assets/js/12.7ac44b73.js"><link rel="prefetch" href="/assets/js/13.de85716f.js"><link rel="prefetch" href="/assets/js/14.59020023.js"><link rel="prefetch" href="/assets/js/15.e9f7a3e2.js"><link rel="prefetch" href="/assets/js/16.cef412aa.js"><link rel="prefetch" href="/assets/js/17.92d82f66.js"><link rel="prefetch" href="/assets/js/18.527b1d74.js"><link rel="prefetch" href="/assets/js/19.d9ae19a7.js"><link rel="prefetch" href="/assets/js/20.581dd66a.js"><link rel="prefetch" href="/assets/js/21.31814c4a.js"><link rel="prefetch" href="/assets/js/22.457a5ceb.js"><link rel="prefetch" href="/assets/js/23.75e602d2.js"><link rel="prefetch" href="/assets/js/24.12ed18f4.js"><link rel="prefetch" href="/assets/js/25.d971f073.js"><link rel="prefetch" href="/assets/js/26.91f1421d.js"><link rel="prefetch" href="/assets/js/27.21e81bad.js"><link rel="prefetch" href="/assets/js/28.746abe2b.js"><link rel="prefetch" href="/assets/js/29.903ee6d3.js"><link rel="prefetch" href="/assets/js/3.38185587.js"><link rel="prefetch" href="/assets/js/30.72c58b78.js"><link rel="prefetch" href="/assets/js/31.db62d21f.js"><link rel="prefetch" href="/assets/js/32.42dca854.js"><link rel="prefetch" href="/assets/js/33.53015461.js"><link rel="prefetch" href="/assets/js/34.4df41d5e.js"><link rel="prefetch" href="/assets/js/35.1c78414f.js"><link rel="prefetch" href="/assets/js/36.8f6083bf.js"><link rel="prefetch" href="/assets/js/37.6a532228.js"><link rel="prefetch" href="/assets/js/38.32236b9c.js"><link rel="prefetch" href="/assets/js/39.5b7eca2b.js"><link rel="prefetch" href="/assets/js/4.d463c8a2.js"><link rel="prefetch" href="/assets/js/40.292e4475.js"><link rel="prefetch" href="/assets/js/41.56fdbd16.js"><link rel="prefetch" href="/assets/js/42.3f9ae95a.js"><link rel="prefetch" href="/assets/js/43.9fab2bff.js"><link rel="prefetch" href="/assets/js/44.f1fb8624.js"><link rel="prefetch" href="/assets/js/45.29339aca.js"><link rel="prefetch" href="/assets/js/46.dbc5baae.js"><link rel="prefetch" href="/assets/js/47.3f19be50.js"><link rel="prefetch" href="/assets/js/48.e37001dd.js"><link rel="prefetch" href="/assets/js/49.0c5929ea.js"><link rel="prefetch" href="/assets/js/5.af576b55.js"><link rel="prefetch" href="/assets/js/50.2ea98ce7.js"><link rel="prefetch" href="/assets/js/51.2bb076ab.js"><link rel="prefetch" href="/assets/js/52.d695bfb1.js"><link rel="prefetch" href="/assets/js/53.47ef7a6e.js"><link rel="prefetch" href="/assets/js/54.c6ef50ce.js"><link rel="prefetch" href="/assets/js/55.c105c469.js"><link rel="prefetch" href="/assets/js/56.125bd3c5.js"><link rel="prefetch" href="/assets/js/57.9fe1eb01.js"><link rel="prefetch" href="/assets/js/58.344d2a96.js"><link rel="prefetch" href="/assets/js/59.d451c70f.js"><link rel="prefetch" href="/assets/js/6.bed7bdce.js"><link rel="prefetch" href="/assets/js/60.97b2294e.js"><link rel="prefetch" href="/assets/js/61.90ef3a94.js"><link rel="prefetch" href="/assets/js/62.d276260a.js"><link rel="prefetch" href="/assets/js/63.e9a299c4.js"><link rel="prefetch" href="/assets/js/64.1da71f5d.js"><link rel="prefetch" href="/assets/js/65.2f42b44b.js"><link rel="prefetch" href="/assets/js/66.0c4efc41.js"><link rel="prefetch" href="/assets/js/67.6cee9ef2.js"><link rel="prefetch" href="/assets/js/68.ccc47f91.js"><link rel="prefetch" href="/assets/js/69.68b9a2d9.js"><link rel="prefetch" href="/assets/js/7.4d390a32.js"><link rel="prefetch" href="/assets/js/70.02b449cc.js"><link rel="prefetch" href="/assets/js/71.ee047f90.js"><link rel="prefetch" href="/assets/js/72.7b2af38d.js"><link rel="prefetch" href="/assets/js/73.a301d903.js"><link rel="prefetch" href="/assets/js/74.38f75c13.js"><link rel="prefetch" href="/assets/js/75.fada9231.js"><link rel="prefetch" href="/assets/js/76.09a2cfc3.js"><link rel="prefetch" href="/assets/js/77.5ef8110e.js"><link rel="prefetch" href="/assets/js/78.ea307212.js"><link rel="prefetch" href="/assets/js/79.b17e7321.js"><link rel="prefetch" href="/assets/js/8.29c57edd.js"><link rel="prefetch" href="/assets/js/80.9488a7df.js"><link rel="prefetch" href="/assets/js/81.31146fba.js"><link rel="prefetch" href="/assets/js/82.e0cf08d9.js"><link rel="prefetch" href="/assets/js/83.f7981ad7.js"><link rel="prefetch" href="/assets/js/84.8e1de019.js"><link rel="prefetch" href="/assets/js/85.a52bf05e.js"><link rel="prefetch" href="/assets/js/86.3d1ede26.js"><link rel="prefetch" href="/assets/js/87.af85964a.js"><link rel="prefetch" href="/assets/js/88.9e14a86f.js"><link rel="prefetch" href="/assets/js/89.9d422c1c.js"><link rel="prefetch" href="/assets/js/9.905580c3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0ad23782.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Sorth Tong</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/algorithm/" class="nav-link">前端算法</a></div><div class="nav-item"><a href="/accumulation/" class="nav-link router-link-active">前端积累</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/68wangxianming" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub地址
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/68wangxianming/front-end-algorithm" target="_blank" rel="noopener noreferrer" class="nav-link external">
  算法仓库
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/accumulation/Other/前端基础面试题3/前端基础面试题3.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/zh/" class="nav-link">中文</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/algorithm/" class="nav-link">前端算法</a></div><div class="nav-item"><a href="/accumulation/" class="nav-link router-link-active">前端积累</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/68wangxianming" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub地址
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/68wangxianming/front-end-algorithm" target="_blank" rel="noopener noreferrer" class="nav-link external">
  算法仓库
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/accumulation/Other/前端基础面试题3/前端基础面试题3.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/zh/" class="nav-link">中文</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/algorithm/" class="sidebar-heading clickable"><span>前端算法</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>HTML</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>CSS</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>JS</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>TypeScript</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>Vue</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>Webpack</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>Node</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>HTTP</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>Linux</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>Other</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active open"><span>前端基础面试题</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/accumulation/Other/前端基础面试题1/前端基础面试题1.html" class="sidebar-link">前端基础面试题(一)</a></li><li><a href="/accumulation/Other/前端基础面试题2/前端基础面试题2.html" class="sidebar-link">前端基础面试题(二)</a></li><li><a href="/accumulation/Other/前端基础面试题3/前端基础面试题3.html" class="active sidebar-link">前端基础面试题(三)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/accumulation/Other/前端基础面试题3/前端基础面试题3.html#webpack" class="sidebar-link">Webpack</a></li><li class="sidebar-sub-header"><a href="/accumulation/Other/前端基础面试题3/前端基础面试题3.html#性能优化" class="sidebar-link">性能优化</a></li><li class="sidebar-sub-header"><a href="/accumulation/Other/前端基础面试题3/前端基础面试题3.html#http" class="sidebar-link">HTTP</a></li><li class="sidebar-sub-header"><a href="/accumulation/Other/前端基础面试题3/前端基础面试题3.html#node" class="sidebar-link">Node</a></li><li class="sidebar-sub-header"><a href="/accumulation/Other/前端基础面试题3/前端基础面试题3.html#安全" class="sidebar-link">安全</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="webpack"><a href="#webpack" class="header-anchor">#</a> Webpack</h2> <h3 id="common-js实现"><a href="#common-js实现" class="header-anchor">#</a> common.js实现</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//webpack commonjs 执行完的时候</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">modules</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 对webpack文件进行缓存</span>
    <span class="token keyword">var</span> installedModules <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token parameter">moduleId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//判断缓存情况</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> module <span class="token operator">=</span> installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
            exports<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">//执行key对应的匿名函数</span>
        modules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> module<span class="token punctuation">,</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> __webpack_require__<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Return the exports of the module</span>
        <span class="token keyword">return</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//执行我们的入口函数 把export导出</span>
    <span class="token keyword">return</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">//__webpack_exports__ =&gt; module.exports = {} </span>
    <span class="token string">&quot;./src/data.js&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> __webpack_exports__<span class="token punctuation">,</span> __webpack_require__</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token string">&quot;webpack源码分析课&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//module.exports = {</span>
        <span class="token comment">//     default:data</span>
        <span class="token comment">// } </span>
        __webpack_exports__<span class="token punctuation">[</span><span class="token string">&quot;default&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> __webpack_exports__<span class="token punctuation">,</span> __webpack_require__</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//_data_js__WEBPACK_IMPORTED_MODULE_0__ == module.exports;</span>
        <span class="token keyword">var</span> _data_js__WEBPACK_IMPORTED_MODULE_0__ <span class="token operator">=</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token string">&quot;./src/data.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//_data_js__WEBPACK_IMPORTED_MODULE_0__[&quot;default&quot;]</span>
        <span class="token comment">//=========data.js===============</span>
        <span class="token comment">//module.exports = {</span>
        <span class="token comment">//     default:data</span>
        <span class="token comment">// } </span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_data_js__WEBPACK_IMPORTED_MODULE_0__<span class="token punctuation">[</span><span class="token string">&quot;default&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;🌶&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//如果有异步的资源webpackJsonpCallback</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h3 id="实现webpack"><a href="#实现webpack" class="header-anchor">#</a> 实现webpack</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> input <span class="token operator">=</span> <span class="token string">&quot;./index.js&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> output <span class="token operator">=</span> <span class="token string">&quot;./dist/index.js&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ejs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;ejs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> getEntry <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> <span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> template <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
 (function (modules) {
     // 对webpack文件进行缓存
     var installedModules = {};
     function __webpack_require__(moduleId) {
         //判断缓存情况
         if (installedModules[moduleId]) {
             return installedModules[moduleId].exports;
         }
         var module = installedModules[moduleId] = {
             exports: {}
         };
         //执行key对应的匿名函数
         modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
         // Return the exports of the module
         return module.exports;
     }
     //执行我们的入口函数 把export导出
     return __webpack_require__(0);
 })([
    (function (module, exports) {
        &lt;%- getEntry %&gt;
    })   
 ]);</span><span class="token template-punctuation string">`</span></span>

<span class="token keyword">let</span> result <span class="token operator">=</span> ejs<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>template<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    getEntry
<span class="token punctuation">}</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>output<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="loader"><a href="#loader" class="header-anchor">#</a> loader</h3> <p><img src="/assets/img/5.9f871ed8.jpg" alt="An image"></p> <p><strong>自己编写loader</strong></p> <p>markdown-loader.js</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//分析mark源码工具</span>
<span class="token keyword">const</span> marked <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;marked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//webpack提供的工具集 收集用户options等 也就是webpack.**.js里module.export的配置等</span>
<span class="token keyword">const</span> loaderUtils <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;loader-utils&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//提供一个对外的函数</span>
<span class="token comment">/*
    webpack 为什么慢 机制分析
    loader1 string(源代码)---&gt;ast(eg1 遍历这颗🌲替换const-&gt;var)---&gt;string
    loader2 接受loader2的string/buffer---&gt;ast---&gt;string
*/</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">markdown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// merge params and default config</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> loaderUtils<span class="token punctuation">.</span><span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 当前loader开启缓存</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cacheable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 用户option---&gt;mark</span>
  marked<span class="token punctuation">.</span><span class="token function">setOptions</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//string</span>
  <span class="token keyword">return</span> <span class="token function">marked</span><span class="token punctuation">(</span>markdown<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//总结出来loader不敢活，核心模块才干活</span>
<span class="token comment">//eg: a-loader 干活的是a</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>index.js</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> loaderUtils <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;loader-utils&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//this 代表当前loader类</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span>map<span class="token punctuation">,</span>meta</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'前置沟盖----&gt;'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token comment">//拿到options</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> loaderUtils<span class="token punctuation">.</span><span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//为了避免使用正则过于复杂 ----&gt;ast🌲</span>
  <span class="token comment">//content.replace('const','var')</span>
  <span class="token keyword">return</span> content<span class="token operator">+</span><span class="token string">'console.log(1)'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function-variable function">pitch</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">r<span class="token punctuation">,</span>p<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  data<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'🐶🐶🐶前置钩子'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>Ast.js</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//1、postcss cssnext -&gt; css</span>
<span class="token comment">//2、webpack loader es6 -&gt; ast -&gt; es5</span>
<span class="token comment">//3、vue template -&gt; html ast -&gt; vdom</span>
<span class="token comment">//4、V8 写的js代码 词法分析 语法分析 ast-&gt;执行</span>
<span class="token comment">//5、ast + 设计模式 发布订阅</span>
<span class="token comment">//webpack使用生成ast的包</span>
<span class="token keyword">const</span> acorn <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'acorn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//webpack使用生成ast遍历工具</span>
<span class="token keyword">const</span> walk <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'acorn-walk'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> MagicString <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'magic-string'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token string">'const a = 100'</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> acorn<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> code <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MagicString</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>

walk<span class="token punctuation">.</span><span class="token function">simple</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">Literal</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Found a literal: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>node<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">VariableDeclaration</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'🍌'</span><span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> start <span class="token punctuation">}</span> <span class="token operator">=</span> node<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'🍎'</span><span class="token punctuation">,</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>
    code<span class="token punctuation">.</span><span class="token function">overwrite</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> start <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;var&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'结果🐟'</span><span class="token punctuation">,</span>code<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p><strong>调用webpack.config.js</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ConsoleLogOnBuildWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./plugin/ConsoleLogOnBuildWebpackPlugin'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span><span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          loader<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'./loader/index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            data<span class="token punctuation">:</span><span class="token string">&quot;🍌🍌🍌:自定义loader&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ConsoleLogOnBuildWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="性能优化"><a href="#性能优化" class="header-anchor">#</a> 性能优化</h2> <h3 id="分析"><a href="#分析" class="header-anchor">#</a> 分析</h3> <p><strong>webpack-bundle-analyzer</strong></p> <p><strong>performance.timing</strong></p> <p>DNS查询耗时、TCP链接耗时、request请求耗时、解析dom树耗时、白屏时间、domready时间、onload时间</p> <h3 id="方案"><a href="#方案" class="header-anchor">#</a> 方案</h3> <h4 id="webpack-2"><a href="#webpack-2" class="header-anchor">#</a> webpack</h4> <p>ContextReplacementPlugin  正则匹配过滤掉不需要的包 /moment[/\]locale/,/zh-cn/</p> <p>externals: {jquery: 'jQuery'}  提取出公共的包</p> <h4 id="cdn"><a href="#cdn" class="header-anchor">#</a> cdn</h4> <h4 id="orm库"><a href="#orm库" class="header-anchor">#</a> orm库</h4> <p>1.ORM封装localstorage + basket.js 解决问题</p> <p>https://www.cnblogs.com/oadaM92/p/5348793.html</p> <p>2.使用PWA完成所有缓存的控制（请开始你的表演）</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'serviceWorker'</span> <span class="token keyword">in</span> navigator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'当前控制权'</span><span class="token punctuation">,</span> navigator<span class="token punctuation">.</span>serviceWorker<span class="token punctuation">.</span>controller<span class="token punctuation">)</span><span class="token punctuation">;</span>
  navigator<span class="token punctuation">.</span>serviceWorker<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'/service-worker.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">registration</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'serviceWorker注册成功，范围为：'</span><span class="token punctuation">,</span> registration<span class="token punctuation">.</span>scope<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'serviceWorker登记失败'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="架构"><a href="#架构" class="header-anchor">#</a> 架构</h4> <p><img src="/assets/img/8.812f0648.jpg" alt="An image"></p> <p>用pjax来处理服务端渲染和客户端渲染的问题</p> <p>quicklink是一个js库，可以预加载出现在视口的网页链接，提高用户体验。它的加载过程如下：
1.检测网页中的链接是否出现在视口中，等待链接出现在视口，执行步骤2。
2.等待浏览器空闲后执行3。
3.判断当前的网络连接是否是2G，如果是则停止执行，如果不是2G网络，执行步骤4。
4.预加载链接指向资源。</p> <h4 id="请求"><a href="#请求" class="header-anchor">#</a> 请求</h4> <p>10个请求封装成一个的问题</p> <p>1.首先同一个CDN的请求数量不能超过5个因为很多浏览器有并发限制，其次每一个文件体积已GZIP压缩过后32k最大为一个衡量标准（这个32是一个经验数字，因为原文件就100多很大了）</p> <p>2.启动类库HTTP强缓存，然后业务JS缓存。同时开启业务JS增量更新方案，也可以控制更细粒度的JS增量更新方案如mtjs。</p> <h2 id="http"><a href="#http" class="header-anchor">#</a> HTTP</h2> <h3 id="常见状态码"><a href="#常见状态码" class="header-anchor">#</a> 常见状态码</h3> <table><thead><tr><th>100</th> <th>Continue</th> <th>继续。<a href="http://www.dreamdu.com/webbuild/client_vs_server/" target="_blank" rel="noopener noreferrer">客户端<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>应继续其请求</th></tr></thead> <tbody><tr><td>200</td> <td>OK</td> <td>请求成功。一般用于GET与POST请求</td></tr> <tr><td>201</td> <td>Created</td> <td>已创建。成功请求并创建了新的资源</td></tr> <tr><td>202</td> <td>Accepted</td> <td>已接受。已经接受请求，但未处理完成</td></tr> <tr><td>203</td> <td>Non-Authoritative Information</td> <td>非授权信息。请求成功。但返回的meta信息不在原始的服务器，而是一个副本</td></tr> <tr><td>204</td> <td>No Content</td> <td>无内容。服务器成功处理，但未返回内容。在未更新网页的情况下，可确保浏览器继续显示当前文档</td></tr> <tr><td>300</td> <td>Multiple Choices</td> <td>多种选择。请求的资源可包括多个位置，相应可返回一个资源特征与地址的列表用于用户终端（例如：浏览器）选择</td></tr> <tr><td>301</td> <td>Moved Permanently</td> <td>永久移动。请求的资源已被永久的移动到新URI，返回信息会包括新的URI，浏览器会自动定向到新URI。今后任何新的请求都应使用新的URI代替</td></tr> <tr><td>302</td> <td>Found</td> <td>临时移动。与301类似。但资源只是临时被移动。客户端应继续使用原有URI</td></tr> <tr><td>303</td> <td>See Other</td> <td>查看其它地址。与301类似。使用GET和POST请求查看</td></tr> <tr><td>304</td> <td>Not Modified</td> <td>未修改。所请求的资源未修改，服务器返回此状态码时，不会返回任何资源。客户端通常会缓存访问过的资源，通过提供一个头信息指出客户端希望只返回在指定日期之后修改的资源</td></tr> <tr><td>400</td> <td>Bad Request</td> <td>客户端请求的语法错误，服务器无法理解</td></tr> <tr><td>401</td> <td>Unauthorized</td> <td>请求要求用户的身份认证</td></tr> <tr><td>402</td> <td>Payment Required</td> <td>保留，将来使用</td></tr> <tr><td>403</td> <td>Forbidden</td> <td>服务器理解请求客户端的请求，但是拒绝执行此请求</td></tr> <tr><td>404</td> <td>Not Found</td> <td>服务器无法根据客户端的请求找到资源（网页）。通过此代码，网站设计人员可设置&quot;您所请求的资源无法找到&quot;的个性页面</td></tr> <tr><td>405</td> <td>Method Not Allowed</td> <td>客户端请求中的方法被禁止</td></tr> <tr><td>500</td> <td>Internal Server Error</td> <td>服务器内部错误，无法完成请求</td></tr> <tr><td>501</td> <td>Not Implemented</td> <td>服务器不支持请求的功能，无法完成请求</td></tr> <tr><td>502</td> <td>Bad Gateway</td> <td>作为网关或者代理工作的服务器尝试执行请求时，从远程服务器接收到了一个无效的响应</td></tr> <tr><td>503</td> <td>Service Unavailable</td> <td>由于超载或系统维护，服务器暂时的无法处理客户端的请求。延时的长度可包含在服务器的Retry-After头信息中</td></tr> <tr><td>504</td> <td>Gateway Time-out</td> <td>充当网关或代理的服务器，未及时从远端服务器获取请求</td></tr> <tr><td>505</td> <td>HTTP Version not supported</td> <td>服务器不支持请求的HTTP协议的版本，无法完成处理</td></tr></tbody></table> <h3 id="tcp-握手挥手"><a href="#tcp-握手挥手" class="header-anchor">#</a> TCP(握手挥手)</h3> <p>https://juejin.im/post/5ccd0dfc6fb9a0324a08bb73</p> <h3 id="浏览器输入url到页面渲染"><a href="#浏览器输入url到页面渲染" class="header-anchor">#</a> 浏览器输入url到页面渲染</h3> <p>http协议工作过程其实是一个事物（当某一项工作需要严格按照若干的步骤去完成，如果不符合就会失败，符合这种特征的就是事物）</p> <h3 id="navigation-timing"><a href="#navigation-timing" class="header-anchor">#</a> navigation-timing</h3> <p>w3c给浏览器制定的标准</p> <p><img src="/assets/img/1.7a59e8a6.jpg" alt="An image"></p> <p>1、prompt for unload</p> <p>页面卸载，从内存中释放掉</p> <p>2、redirect</p> <p>本地重定向，与服务器无关，先从本地缓存中寻找</p> <p>根据索引查找，查看文件是否支持脱机浏览，如果有并支持进行本地跳转</p> <p>3、App cache</p> <p>本地缓存</p> <p>总结 先有一个卸载的提示 然后去浏览器缓存、服务器缓存、反向代理服务器中寻找 ，如果找到了发生重定向，如果没进入网络层，页面进行卸载</p> <p>4、DNS</p> <p>自己的pc、家用路由器、互联网</p> <p>当自己家用路由器连接到互联网的时候，需要向拨号服务器进行一个拨号请求，拨完号后DNS的地址就保存到你的家用路由器上，当pc启动的时候要进行网络设置，然后DHCP(局域网动态获取ip地址的协议)，路由器给pc分配ip地址的时候把DNS一块写进来</p> <p>(优化的点 利用cdn)</p> <p>5、TCP</p> <p>拿到服务器地址后进行连接</p> <p>三次握手四次挥手 如果是https的话中间还有一个加密的过程</p> <p>6、requset</p> <p>7、response</p> <p><img src="/assets/img/2.054f543b.jpg" alt="An image"></p> <p><img src="/assets/img/3.fe4883f2.jpg" alt="An image"></p> <p><img src="/assets/img/4.1f78fe67.jpg" alt="An image"></p> <p>大厂会使用镜像（但是在换了域名的时候比较费劲，所以我们在阿里云配置的时候需要等10分钟，数据同步）</p> <h3 id="http无状态协议"><a href="#http无状态协议" class="header-anchor">#</a> http无状态协议</h3> <p>https://www.cnblogs.com/bellkosmos/p/5237146.html</p> <p><strong>http协议是无状态的，无连接的</strong></p> <ol><li><p>标准的http协议指的是不包括cookies, session，application的http协议，他们都不属于标准协议，虽然各种网络应用提供商，实现语言、web容器等，都默认支持它</p></li> <li><p>无连接指的是什么</p> <p>每一个访问都是无连接，服务器挨个处理访问队列里的访问，处理完一个就关闭连接，这事儿就完了，然后处理下一个新的</p> <p>无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接</p></li></ol> <p>###http的基本优化</p> <p>https://mp.weixin.qq.com/s/GICbiyJpINrHZ41u_4zT-A?</p> <p><strong>延迟和带宽</strong>（带宽就自己充钱吧）</p> <p><strong>延迟</strong></p> <p>浏览器阻塞(并发数量)、DNS查询、建立连接(三次握手四次挥手)</p> <h3 id="https与http的一些区别"><a href="#https与http的一些区别" class="header-anchor">#</a> <strong>HTTPS与HTTP的一些区别</strong></h3> <p>HTTPS协议需要到CA申请证书，一般免费证书很少，需要交费。</p> <p>HTTP协议运行在TCP之上，所有传输的内容都是明文，HTTPS运行在SSL/TLS之上，SSL/TLS运行在TCP之上，所有传输的内容都经过加密的。</p> <p>HTTP和HTTPS使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。</p> <p>HTTPS可以有效的防止运营商劫持，解决了防劫持的一个大问题。</p> <h3 id="http2和http的区别"><a href="#http2和http的区别" class="header-anchor">#</a> http2和http的区别</h3> <p><strong>新的二进制格式</strong></p> <p>HTTP1.x的解析是基于文本</p> <p><strong>多路复用</strong></p> <p>一个request对应一个id，这样一个连接上可以有多个request，每个连接的request可以随机的混杂在一起</p> <p><strong>header压缩</strong></p> <p>HTTP1.x的header带有大量信息，而且每次都要重复发送，HTTP2.0使用encoder来减少需要传输的header大小，通讯双方各自cache一份header fields表，既避免了重复header的传输，又减小了需要传输的大小。</p> <p><strong>服务端推送</strong></p> <p>server push，同SPDY一样，HTTP2.0也具有server push功能</p> <p>###<strong>HTTP2.0的多路复用和HTTP1.X中的长连接复用有什么区别？</strong></p> <ul><li>HTTP/1.* 一次请求-响应，建立一个连接，用完关闭；每一个请求都要建立一个连接；</li> <li>HTTP/1.1 Pipeling解决方式为，若干个请求排队串行化单线程处理，后面的请求等待前面请求的返回才能获得执行机会，一旦有某请求超时等，后续请求只能被阻塞，毫无办法，也就是人们常说的线头阻塞；</li> <li>HTTP/2多个请求可同时在一个连接上并行执行。某个请求任务耗时严重，不会影响到其它连接的正常执行；</li></ul> <h3 id="http2-0多路复用有多好？"><a href="#http2-0多路复用有多好？" class="header-anchor">#</a> HTTP2.0多路复用有多好？</h3> <p>HTTP 性能优化的关键并不在于高带宽，而是低延迟。TCP 连接会随着时间进行自我「调谐」，起初会限制连接的最大速度，如果数据成功传输，会随着时间的推移提高传输的速度。这种调谐则被称为 TCP 慢启动。由于这种原因，让原本就具有突发性和短时性的 HTTP 连接变的十分低效。
HTTP/2 通过让所有数据流共用同一个连接，可以更有效地使用 TCP 连接，让高带宽也能真正的服务于 HTTP 的性能提升。</p> <p>HTTP/2对同⼀一
域名下所有请求都是基于流，也就是说同⼀一域名不不管访问多少⽂文件，也只建⽴立⼀一路路连接。同样Apache的最⼤大连接数为300，因为有了了
这个新特性，最⼤大的并发就可以提升到300，⽐比原来提升了了6倍!</p> <h2 id="node"><a href="#node" class="header-anchor">#</a> Node</h2> <h2 id="安全"><a href="#安全" class="header-anchor">#</a> 安全</h2> <p>https://github.com/dwqs/blog/issues/68</p> <p>https://www.cnblogs.com/menggirl23/p/10184607.html</p> <h3 id="csrf"><a href="#csrf" class="header-anchor">#</a> CSRF</h3> <p>跨站请求伪造，是通过伪装成受信任用户的请求来利用受信任的网站进行攻击</p> <p>(饿了么外卖) 主要是劫持token</p> <p><strong>防御措施</strong></p> <p>token认证 referer验证</p> <h3 id="xss"><a href="#xss" class="header-anchor">#</a> XSS</h3> <p>跨站脚本攻击</p> <p>恶意web用户将代码植入到提供给其它用户使用的页面中</p> <p><strong>反射型</strong></p> <p>反射型XSS也叫非持久型XSS，是指发生请求时，XSS代码出现在请求<code>URL</code>中，作为参数提交给服务器，服务器解析并响应，响应结果中包含XSS代码，最后浏览器解析并执行。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;null&quot;</span> <span class="token function-variable function">onerror</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token function">alert</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>cookie<span class="token punctuation">)</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>存储型</strong></p> <p>存储型XSS，也叫做持久型XSS，主要是将XSS代码发送到服务端(无论是数据库、内存还是文件系统)，然后下次请求页面的时候，XSS代码会随着浏览器渲染出来，就不需要手动再次带上XSS代码。</p> <p>这个典型的例子就是留言板，用户提交一条包含XSS代码的留言到数据库，当目标用户查看留言的时候就会从服务器解析之后加载出来，浏览器发现有可执行的代码，就当做正常的HTML和CSS或者JS进行解析，XSS攻击就产生了。</p> <p><strong>DOM</strong></p> <p>DOM XSS代码不需要服务器端的解析响应的直接参与，而是通过浏览器端的DOM解析。这完全是客户端的事情</p> <ol><li>通过<code>document.cookie</code>可以盗取用户的<code>cookie</code>。如果是黑客的话，可能还会做一些其他的手段。</li> <li>使用JavaScript或者CSS破话页面正常的结构和样式。黑客可以通过在用户端获取到的用户信息发送到黑客的服务器上。</li> <li>流量劫持(通过询问某段具有<code>window.location.href</code>定位到其他页面，进行流量劫持)。</li> <li>Dos攻击：利用合理的客户端请求来占用过多的服务端资源，从而使合法用户无法得到服务端响应。</li> <li>利用<code>iframe</code>、<code>frame</code>、<code>XMLHttpRequest</code>或<code>Flash</code>方式，以被攻击用户的身份执行一些管理动作，或执行一些如：发微博、加好友、发私信等操作。</li> <li>利用可被攻击的域收到其他域信任的特点，以受信任来源的身份请求一些平时不允许的操作，如进行不正当的投票活动等等。</li></ol> <p><strong>防御措施</strong></p> <p>cookie保护： httpOnly</p> <p>用户输入：用户输入内容编码解码 (he.js) 不合法的东西过滤(HTMLParser.js)</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/accumulation/Other/前端基础面试题2/前端基础面试题2.html" class="prev">前端基础面试题(二)</a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6e5cd8bf.js" defer></script><script src="/assets/js/2.f4f4c0ef.js" defer></script><script src="/assets/js/10.831e867e.js" defer></script>
  </body>
</html>
