<!DOCTYPE html>
<html lang="English">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端性能优化必备服务器知识 | Sorth Tong</title>
    <meta name="description" content="年少不被层楼误，余生不羁尽自由。">
    <link rel="icon" href="/test.png">
    
    <link rel="preload" href="/assets/css/0.styles.0ad23782.css" as="style"><link rel="preload" href="/assets/js/app.6e5cd8bf.js" as="script"><link rel="preload" href="/assets/js/2.f4f4c0ef.js" as="script"><link rel="preload" href="/assets/js/8.29c57edd.js" as="script"><link rel="prefetch" href="/assets/js/10.831e867e.js"><link rel="prefetch" href="/assets/js/11.39d09690.js"><link rel="prefetch" href="/assets/js/12.7ac44b73.js"><link rel="prefetch" href="/assets/js/13.de85716f.js"><link rel="prefetch" href="/assets/js/14.59020023.js"><link rel="prefetch" href="/assets/js/15.e9f7a3e2.js"><link rel="prefetch" href="/assets/js/16.cef412aa.js"><link rel="prefetch" href="/assets/js/17.92d82f66.js"><link rel="prefetch" href="/assets/js/18.527b1d74.js"><link rel="prefetch" href="/assets/js/19.d9ae19a7.js"><link rel="prefetch" href="/assets/js/20.581dd66a.js"><link rel="prefetch" href="/assets/js/21.31814c4a.js"><link rel="prefetch" href="/assets/js/22.457a5ceb.js"><link rel="prefetch" href="/assets/js/23.75e602d2.js"><link rel="prefetch" href="/assets/js/24.12ed18f4.js"><link rel="prefetch" href="/assets/js/25.d971f073.js"><link rel="prefetch" href="/assets/js/26.91f1421d.js"><link rel="prefetch" href="/assets/js/27.21e81bad.js"><link rel="prefetch" href="/assets/js/28.746abe2b.js"><link rel="prefetch" href="/assets/js/29.903ee6d3.js"><link rel="prefetch" href="/assets/js/3.38185587.js"><link rel="prefetch" href="/assets/js/30.72c58b78.js"><link rel="prefetch" href="/assets/js/31.db62d21f.js"><link rel="prefetch" href="/assets/js/32.42dca854.js"><link rel="prefetch" href="/assets/js/33.53015461.js"><link rel="prefetch" href="/assets/js/34.4df41d5e.js"><link rel="prefetch" href="/assets/js/35.1c78414f.js"><link rel="prefetch" href="/assets/js/36.8f6083bf.js"><link rel="prefetch" href="/assets/js/37.6a532228.js"><link rel="prefetch" href="/assets/js/38.32236b9c.js"><link rel="prefetch" href="/assets/js/39.5b7eca2b.js"><link rel="prefetch" href="/assets/js/4.d463c8a2.js"><link rel="prefetch" href="/assets/js/40.292e4475.js"><link rel="prefetch" href="/assets/js/41.56fdbd16.js"><link rel="prefetch" href="/assets/js/42.3f9ae95a.js"><link rel="prefetch" href="/assets/js/43.9fab2bff.js"><link rel="prefetch" href="/assets/js/44.f1fb8624.js"><link rel="prefetch" href="/assets/js/45.29339aca.js"><link rel="prefetch" href="/assets/js/46.dbc5baae.js"><link rel="prefetch" href="/assets/js/47.3f19be50.js"><link rel="prefetch" href="/assets/js/48.e37001dd.js"><link rel="prefetch" href="/assets/js/49.0c5929ea.js"><link rel="prefetch" href="/assets/js/5.af576b55.js"><link rel="prefetch" href="/assets/js/50.2ea98ce7.js"><link rel="prefetch" href="/assets/js/51.2bb076ab.js"><link rel="prefetch" href="/assets/js/52.d695bfb1.js"><link rel="prefetch" href="/assets/js/53.47ef7a6e.js"><link rel="prefetch" href="/assets/js/54.c6ef50ce.js"><link rel="prefetch" href="/assets/js/55.c105c469.js"><link rel="prefetch" href="/assets/js/56.125bd3c5.js"><link rel="prefetch" href="/assets/js/57.9fe1eb01.js"><link rel="prefetch" href="/assets/js/58.344d2a96.js"><link rel="prefetch" href="/assets/js/59.d451c70f.js"><link rel="prefetch" href="/assets/js/6.bed7bdce.js"><link rel="prefetch" href="/assets/js/60.97b2294e.js"><link rel="prefetch" href="/assets/js/61.90ef3a94.js"><link rel="prefetch" href="/assets/js/62.d276260a.js"><link rel="prefetch" href="/assets/js/63.e9a299c4.js"><link rel="prefetch" href="/assets/js/64.1da71f5d.js"><link rel="prefetch" href="/assets/js/65.2f42b44b.js"><link rel="prefetch" href="/assets/js/66.0c4efc41.js"><link rel="prefetch" href="/assets/js/67.6cee9ef2.js"><link rel="prefetch" href="/assets/js/68.ccc47f91.js"><link rel="prefetch" href="/assets/js/69.68b9a2d9.js"><link rel="prefetch" href="/assets/js/7.4d390a32.js"><link rel="prefetch" href="/assets/js/70.02b449cc.js"><link rel="prefetch" href="/assets/js/71.ee047f90.js"><link rel="prefetch" href="/assets/js/72.7b2af38d.js"><link rel="prefetch" href="/assets/js/73.a301d903.js"><link rel="prefetch" href="/assets/js/74.38f75c13.js"><link rel="prefetch" href="/assets/js/75.fada9231.js"><link rel="prefetch" href="/assets/js/76.09a2cfc3.js"><link rel="prefetch" href="/assets/js/77.5ef8110e.js"><link rel="prefetch" href="/assets/js/78.ea307212.js"><link rel="prefetch" href="/assets/js/79.b17e7321.js"><link rel="prefetch" href="/assets/js/80.9488a7df.js"><link rel="prefetch" href="/assets/js/81.31146fba.js"><link rel="prefetch" href="/assets/js/82.e0cf08d9.js"><link rel="prefetch" href="/assets/js/83.f7981ad7.js"><link rel="prefetch" href="/assets/js/84.8e1de019.js"><link rel="prefetch" href="/assets/js/85.a52bf05e.js"><link rel="prefetch" href="/assets/js/86.3d1ede26.js"><link rel="prefetch" href="/assets/js/87.af85964a.js"><link rel="prefetch" href="/assets/js/88.9e14a86f.js"><link rel="prefetch" href="/assets/js/89.9d422c1c.js"><link rel="prefetch" href="/assets/js/9.905580c3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0ad23782.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Sorth Tong</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/algorithm/" class="nav-link">前端算法</a></div><div class="nav-item"><a href="/accumulation/" class="nav-link router-link-active">前端积累</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/68wangxianming" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub地址
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/68wangxianming/front-end-algorithm" target="_blank" rel="noopener noreferrer" class="nav-link external">
  算法仓库
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/accumulation/Other/前端性能优化必备服务器知识/前端性能优化必备服务器知识.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/zh/" class="nav-link">中文</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/algorithm/" class="nav-link">前端算法</a></div><div class="nav-item"><a href="/accumulation/" class="nav-link router-link-active">前端积累</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/68wangxianming" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub地址
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/68wangxianming/front-end-algorithm" target="_blank" rel="noopener noreferrer" class="nav-link external">
  算法仓库
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/accumulation/Other/前端性能优化必备服务器知识/前端性能优化必备服务器知识.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/zh/" class="nav-link">中文</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/algorithm/" class="sidebar-heading clickable"><span>前端算法</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>HTML</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>CSS</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>JS</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>TypeScript</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>Vue</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>Webpack</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>Node</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>HTTP</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>Linux</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active open"><span>Other</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/accumulation/Other/函数式编程/函数式编程.html" class="sidebar-link">函数式编程</a></li><li><a href="/accumulation/Other/JavaScript与QA工程师/JavaScript与QA工程师.html" class="sidebar-link">JavaScript与QA工程师</a></li><li><a href="/accumulation/Other/jenkins/jenkins.html" class="sidebar-link">jenkins</a></li><li><a href="/accumulation/Other/nginx反向代理和负载均衡/nginx反向代理和负载均衡.html" class="sidebar-link">nginx反向代理和负载均衡</a></li><li><a href="/accumulation/Other/PHP与MySQL开发入门上/PHP与MySQL开发入门上.html" class="sidebar-link">PHP与MySQL开发入门上</a></li><li><a href="/accumulation/Other/PHP与MySQL开发入门中/PHP与MySQL开发入门中.html" class="sidebar-link">PHP与MySQL开发入门中</a></li><li><a href="/accumulation/Other/PHP与MySQL开发入门下/PHP与MySQL开发入门下.html" class="sidebar-link">PHP与MySQL开发入门下</a></li><li><a href="/accumulation/Other/从小到大论前端项目持续集成/从小到大论前端项目持续集成.html" class="sidebar-link">从小到大论前端项目持续集成</a></li><li><a href="/accumulation/Other/前后端分离用户验证/前后端分离用户验证.html" class="sidebar-link">前后端分离用户验证</a></li><li><a href="/accumulation/Other/前端性能优化必备服务器知识/前端性能优化必备服务器知识.html" class="active sidebar-link">前端性能优化必备服务器知识</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/accumulation/Other/前端架构与性能优化那些事/前端架构与性能优化那些事.html" class="sidebar-link">前端架构与性能优化那些事</a></li><li><a href="/accumulation/Other/同步异步阻塞非阻塞/同步异步阻塞非阻塞.html" class="sidebar-link">同步异步阻塞非阻塞</a></li><li><a href="/accumulation/Other/基本错误捕获处理/基本错误捕获处理.html" class="sidebar-link">基本错误捕获处理</a></li><li><a href="/accumulation/Other/面向切面/面向切面.html" class="sidebar-link">面向切面</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>前端基础面试题</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="浏览器渲染过程"><a href="#浏览器渲染过程" class="header-anchor">#</a> 浏览器渲染过程</h3> <p>https://www.w3.org/TR/navigation-timing/</p> <p>缓存层：prompt for unload、redirect、App cache
网络层：DNS、TCP、Request、Response
渲染层：Processing、onload</p> <p><img src="/assets/img/1.6cb7a40c.jpg" alt="An image">
unload是指卸载掉了上一个页面，与重定向是并发的。
redirect在浏览器缓存中寻找，缓存以索引形式存在。找到页面是否下载过，并且判断文件是否支持脱机浏览。(很早之前浏览器支持脱机浏览)前提文件没有过期
DNS部分的优化使用CDN
Http是基于Tcp和Udp，Tcp是IO传输,每次请求都要握手挥手，所以可以优化，复用连接。
TCP部分优化由底层程序员处理 HTTP1、2、3 长连接
TCP secureConnection安全连接时间 https 基于SSL连接所以时间比较长
Requset-&gt;Resopnse之前考虑服务器的性能数据质量等等
Resoponse部分就是压缩 文件类型(text img等速度是不一样的)和压缩之前的权衡
Processing domloading先把dom加载都内存里 domInteractive生成dom节点 domcontentloaded内容加载 domcomplete完毕</p> <p><img src="/assets/img/2.8f213908.jpg" alt="An image"></p> <ul><li>navigationStart
加载起始时间</li> <li>redirectStart
重定向开始时间（如果发生了HTTP重定向，每次重定向都和当前文档同域的话，就返回开始重定向的fetchStart的值。其他情况，则返回0）</li> <li>redirectEnd
重定向结束时间（如果发生了HTTP重定向，每次重定向都和当前文档同域的话，就返回最后一次重定向接受完数据的时间。其他情况则返回0）</li> <li>fetchStart
浏览器发起资源请求时，如果有缓存，则返回读取缓存的开始时间</li> <li>domainLookupStart
查询DNS的开始时间。如果请求没有发起DNS请求，如keep-alive，缓存等，则返回fetchStart</li> <li>domainLookupEnd
查询DNS的结束时间。如果没有发起DNS请求，同上</li> <li>connectStart
开始建立TCP请求的时间。如果请求是keep-alive，缓存等，则返回domainLookupEnd</li> <li>(secureConnectionStart)
如果在进行TLS或SSL，则返回握手时间</li> <li>connectEnd
完成TCP链接的时间。如果是keep-alive，缓存等，同connectStart</li> <li>requestStart
发起请求的时间</li> <li>responseStart
服务器开始响应的时间</li> <li>domLoading
从图中看是开始渲染dom的时间，具体未知</li> <li>domInteractive
未知</li> <li>domContentLoadedEventStart
开始触发DomContentLoadedEvent事件的时间</li> <li>domContentLoadedEventEnd
DomContentLoadedEvent事件结束的时间</li> <li>domComplete
从图中看是dom渲染完成时间，具体未知</li> <li>loadEventStart
触发load的时间，如没有则返回0</li> <li>loadEventEnd
load事件执行完的时间，如没有则返回0</li> <li>unloadEventStart
unload事件触发的时间</li> <li>unloadEventEnd
unload事件执行完的时间</li></ul> <h4 id="简单用法"><a href="#简单用法" class="header-anchor">#</a> 简单用法</h4> <p>DNS解析时间： domainLookupEnd - domainLookupStart
TCP建立连接时间： connectEnd - connectStart</p> <p>白屏时间： responseStart - navigationStart
dom渲染完成时间： domContentLoadedEventEnd - navigationStart
页面onload时间： loadEventEnd - navigationStart</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> timing <span class="token operator">=</span> performance<span class="token punctuation">.</span>timing<span class="token punctuation">,</span>
    start <span class="token operator">=</span> timing<span class="token punctuation">.</span>navigationStart<span class="token punctuation">,</span>
    dnsTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">4</span>
    tcpTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    firstPaintTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    domRenderTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    loadTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

dnsTime <span class="token operator">=</span> timing<span class="token punctuation">.</span>domainLookupEnd <span class="token operator">-</span> timing<span class="token punctuation">.</span>domainLookupStart<span class="token punctuation">;</span>
tcpTime <span class="token operator">=</span> timing<span class="token punctuation">.</span>connectEnd <span class="token operator">-</span> timing<span class="token punctuation">.</span>connectStart<span class="token punctuation">;</span>
firstPaintTime <span class="token operator">=</span> timing<span class="token punctuation">.</span>responseStart <span class="token operator">-</span> start<span class="token punctuation">;</span>
domRenderTime <span class="token operator">=</span> timing<span class="token punctuation">.</span>domContentLoadedEventEnd <span class="token operator">-</span> start<span class="token punctuation">;</span>
loadTime <span class="token operator">=</span> timing<span class="token punctuation">.</span>loadEventEnd <span class="token operator">-</span> start<span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'DNS解析时间:'</span><span class="token punctuation">,</span> dnsTime <span class="token punctuation">,</span> <span class="token string">'\nTCP建立时间:'</span><span class="token punctuation">,</span> tcpTime<span class="token punctuation">,</span> <span class="token string">'\n首屏时间:'</span><span class="token punctuation">,</span> firstPaintTime<span class="token punctuation">,</span>
 <span class="token string">'\ndom渲染完成时间:'</span><span class="token punctuation">,</span> domRenderTime<span class="token punctuation">,</span> <span class="token string">'\n页面onload时间:'</span><span class="token punctuation">,</span> loadTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="dns详情"><a href="#dns详情" class="header-anchor">#</a> DNS详情</h3> <p>DNS域名系统，用于讲域名转换成IP,人脑适合文本，机器适合数字。</p> <h4 id="域名解析"><a href="#域名解析" class="header-anchor">#</a> 域名解析</h4> <p><img src="/assets/img/3.de3c7c03.jpg" alt="An image">
1、客户端
2、DNS服务器 先看看缓存里有没有 再去找根服务器 根服务器根据后缀 告诉你去那个TLD服务器上找
3、根服务器 负责维护全球互联网域名的解析 负责协调 （十几台中国一台都没有）告诉你去那个TLD服务器上找
4、只管顶级域名 告诉你顶级域名是那个服务器维护
5、具体某个域名解析IP是多少 传给DNS服务器并让之缓存</p> <p>DNS服务器解析这么复杂，所以很多大厂都会选择把3、4、5的数据镜像下来
但是换机子A-&gt;B就需要重新给镜像备份数据（阿里云配置域名，需要等十几分钟才能生效，因为要同步镜像数据）
<img src="/assets/img/4.3616d03c.jpg" alt="An image"></p> <h3 id="tcp三次握手与四次挥手"><a href="#tcp三次握手与四次挥手" class="header-anchor">#</a> TCP三次握手与四次挥手</h3> <p><img src="/assets/img/5.4cf34f22.jpg" alt="An image">
从数据发送端开始，应用层到物理层不断加上头（洋葱），到物理层比特流传输 0101
每一层都要对上一层负责，每一层都要对下一层调用</p> <h4 id="tcp协议模型详解"><a href="#tcp协议模型详解" class="header-anchor">#</a> TCP协议模型详解</h4> <p><img src="/assets/img/6.3d4eab6c.jpg" alt="An image">
TCP头很小几十个字节
<img src="/assets/img/7.12cc0fe5.jpg" alt="An image">
源端口：Source Port 目的端口Destination Port
顺序号：Sequence Number 应答号：Acknowledgment Number
TCP控制指令 Options
<img src="/assets/img/8.0acf411b.jpg" alt="An image">
谁主动找上去谁是客户端，谁等着被连接说是服务器。
SYN指令填写在options
seq 顺序号 如果大数据包出错那么数据包就要全部重发，TCP要把大数据把拆成小数据包，小数据包需要有顺序号，服务器接收后要把小数据包组装成大数据包。
ACK应答指令
<strong>建立三次握手</strong>
1、SYN_SENT-&gt;SYN_RCVD SYN seq=x(客户端编号规则)
2、SYN_RCVD-&gt;ESTABLISHED SYN seq=y(服务端编号规则) ACKACK=x(应答客户端那个顺序的包)+1
3、ACK=y+1
黑客常用攻击执行1、2但是客户端回应3 导致套接字积累越来越多 残缺连接越来越多
<strong>数据传输</strong>
进行多次通讯
1、seq=x+1 ACK=y+1
2、ACK=x+2
<strong>断开四次挥手</strong>
正常情况下客户端主动断开连接，异常情况下服务端可以主动断开连接
1、FIN seq=x+2 ACK=y+1
2、ACK=x+3
3、FIN seq=y+1 (半连接状态)
服务器应答的适合发两个包（先告诉客户端我收到了发送指令）(把没干完的活继续干完 给客户端发送断开请求)
4、ACK=y+2 客户端向服务器发出确认</p> <h3 id="缓存机制"><a href="#缓存机制" class="header-anchor">#</a> 缓存机制</h3> <p><img src="/assets/img/9.e5a1b4a1.jpg" alt="An image"> <img src="/assets/img/10.5dc9606f.jpg" alt="An image"> <img src="/assets/img/11.0f322c36.jpg" alt="An image"> <img src="/assets/img/12.00b594d4.jpg" alt="An image">
Etag和Last-Modified区别是，一个是唯一标识(MD5)一个是时间戳
etag: &quot;56d69716-d5&quot;
last-modified: Wed, 02 Mar 2016 07:32:38 GMT</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/accumulation/Other/前后端分离用户验证/前后端分离用户验证.html" class="prev">前后端分离用户验证</a></span> <span class="next"><a href="/accumulation/Other/前端架构与性能优化那些事/前端架构与性能优化那些事.html">前端架构与性能优化那些事</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6e5cd8bf.js" defer></script><script src="/assets/js/2.f4f4c0ef.js" defer></script><script src="/assets/js/8.29c57edd.js" defer></script>
  </body>
</html>
