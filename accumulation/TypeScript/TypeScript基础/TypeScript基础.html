<!DOCTYPE html>
<html lang="English">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TypeScript基础 | Sorth Tong</title>
    <meta name="description" content="年少不被层楼误，余生不羁尽自由。">
    <link rel="icon" href="/test.png">
    
    <link rel="preload" href="/assets/css/0.styles.0ad23782.css" as="style"><link rel="preload" href="/assets/js/app.6e5cd8bf.js" as="script"><link rel="preload" href="/assets/js/2.f4f4c0ef.js" as="script"><link rel="preload" href="/assets/js/16.cef412aa.js" as="script"><link rel="prefetch" href="/assets/js/10.831e867e.js"><link rel="prefetch" href="/assets/js/11.39d09690.js"><link rel="prefetch" href="/assets/js/12.7ac44b73.js"><link rel="prefetch" href="/assets/js/13.de85716f.js"><link rel="prefetch" href="/assets/js/14.59020023.js"><link rel="prefetch" href="/assets/js/15.e9f7a3e2.js"><link rel="prefetch" href="/assets/js/17.92d82f66.js"><link rel="prefetch" href="/assets/js/18.527b1d74.js"><link rel="prefetch" href="/assets/js/19.d9ae19a7.js"><link rel="prefetch" href="/assets/js/20.581dd66a.js"><link rel="prefetch" href="/assets/js/21.31814c4a.js"><link rel="prefetch" href="/assets/js/22.457a5ceb.js"><link rel="prefetch" href="/assets/js/23.75e602d2.js"><link rel="prefetch" href="/assets/js/24.12ed18f4.js"><link rel="prefetch" href="/assets/js/25.d971f073.js"><link rel="prefetch" href="/assets/js/26.91f1421d.js"><link rel="prefetch" href="/assets/js/27.21e81bad.js"><link rel="prefetch" href="/assets/js/28.746abe2b.js"><link rel="prefetch" href="/assets/js/29.903ee6d3.js"><link rel="prefetch" href="/assets/js/3.38185587.js"><link rel="prefetch" href="/assets/js/30.72c58b78.js"><link rel="prefetch" href="/assets/js/31.db62d21f.js"><link rel="prefetch" href="/assets/js/32.42dca854.js"><link rel="prefetch" href="/assets/js/33.53015461.js"><link rel="prefetch" href="/assets/js/34.4df41d5e.js"><link rel="prefetch" href="/assets/js/35.1c78414f.js"><link rel="prefetch" href="/assets/js/36.8f6083bf.js"><link rel="prefetch" href="/assets/js/37.6a532228.js"><link rel="prefetch" href="/assets/js/38.32236b9c.js"><link rel="prefetch" href="/assets/js/39.5b7eca2b.js"><link rel="prefetch" href="/assets/js/4.d463c8a2.js"><link rel="prefetch" href="/assets/js/40.292e4475.js"><link rel="prefetch" href="/assets/js/41.56fdbd16.js"><link rel="prefetch" href="/assets/js/42.3f9ae95a.js"><link rel="prefetch" href="/assets/js/43.9fab2bff.js"><link rel="prefetch" href="/assets/js/44.f1fb8624.js"><link rel="prefetch" href="/assets/js/45.29339aca.js"><link rel="prefetch" href="/assets/js/46.dbc5baae.js"><link rel="prefetch" href="/assets/js/47.3f19be50.js"><link rel="prefetch" href="/assets/js/48.e37001dd.js"><link rel="prefetch" href="/assets/js/49.0c5929ea.js"><link rel="prefetch" href="/assets/js/5.af576b55.js"><link rel="prefetch" href="/assets/js/50.2ea98ce7.js"><link rel="prefetch" href="/assets/js/51.2bb076ab.js"><link rel="prefetch" href="/assets/js/52.d695bfb1.js"><link rel="prefetch" href="/assets/js/53.47ef7a6e.js"><link rel="prefetch" href="/assets/js/54.c6ef50ce.js"><link rel="prefetch" href="/assets/js/55.c105c469.js"><link rel="prefetch" href="/assets/js/56.125bd3c5.js"><link rel="prefetch" href="/assets/js/57.9fe1eb01.js"><link rel="prefetch" href="/assets/js/58.344d2a96.js"><link rel="prefetch" href="/assets/js/59.d451c70f.js"><link rel="prefetch" href="/assets/js/6.bed7bdce.js"><link rel="prefetch" href="/assets/js/60.97b2294e.js"><link rel="prefetch" href="/assets/js/61.90ef3a94.js"><link rel="prefetch" href="/assets/js/62.d276260a.js"><link rel="prefetch" href="/assets/js/63.e9a299c4.js"><link rel="prefetch" href="/assets/js/64.1da71f5d.js"><link rel="prefetch" href="/assets/js/65.2f42b44b.js"><link rel="prefetch" href="/assets/js/66.0c4efc41.js"><link rel="prefetch" href="/assets/js/67.6cee9ef2.js"><link rel="prefetch" href="/assets/js/68.ccc47f91.js"><link rel="prefetch" href="/assets/js/69.68b9a2d9.js"><link rel="prefetch" href="/assets/js/7.4d390a32.js"><link rel="prefetch" href="/assets/js/70.02b449cc.js"><link rel="prefetch" href="/assets/js/71.ee047f90.js"><link rel="prefetch" href="/assets/js/72.7b2af38d.js"><link rel="prefetch" href="/assets/js/73.a301d903.js"><link rel="prefetch" href="/assets/js/74.38f75c13.js"><link rel="prefetch" href="/assets/js/75.fada9231.js"><link rel="prefetch" href="/assets/js/76.09a2cfc3.js"><link rel="prefetch" href="/assets/js/77.5ef8110e.js"><link rel="prefetch" href="/assets/js/78.ea307212.js"><link rel="prefetch" href="/assets/js/79.b17e7321.js"><link rel="prefetch" href="/assets/js/8.29c57edd.js"><link rel="prefetch" href="/assets/js/80.9488a7df.js"><link rel="prefetch" href="/assets/js/81.31146fba.js"><link rel="prefetch" href="/assets/js/82.e0cf08d9.js"><link rel="prefetch" href="/assets/js/83.f7981ad7.js"><link rel="prefetch" href="/assets/js/84.8e1de019.js"><link rel="prefetch" href="/assets/js/85.a52bf05e.js"><link rel="prefetch" href="/assets/js/86.3d1ede26.js"><link rel="prefetch" href="/assets/js/87.af85964a.js"><link rel="prefetch" href="/assets/js/88.9e14a86f.js"><link rel="prefetch" href="/assets/js/89.9d422c1c.js"><link rel="prefetch" href="/assets/js/9.905580c3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0ad23782.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Sorth Tong</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/algorithm/" class="nav-link">前端算法</a></div><div class="nav-item"><a href="/accumulation/" class="nav-link router-link-active">前端积累</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/68wangxianming" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub地址
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/68wangxianming/front-end-algorithm" target="_blank" rel="noopener noreferrer" class="nav-link external">
  算法仓库
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/accumulation/TypeScript/TypeScript基础/TypeScript基础.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/zh/" class="nav-link">中文</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/algorithm/" class="nav-link">前端算法</a></div><div class="nav-item"><a href="/accumulation/" class="nav-link router-link-active">前端积累</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/68wangxianming" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub地址
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/68wangxianming/front-end-algorithm" target="_blank" rel="noopener noreferrer" class="nav-link external">
  算法仓库
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/accumulation/TypeScript/TypeScript基础/TypeScript基础.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/zh/" class="nav-link">中文</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/algorithm/" class="sidebar-heading clickable"><span>前端算法</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>HTML</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>CSS</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>JS</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active open"><span>TypeScript</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/accumulation/TypeScript/TypeScript基础/TypeScript基础.html" class="active sidebar-link">TypeScript基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/accumulation/TypeScript/TypeScript基础/TypeScript基础.html#到底为什么要学习-typescript？" class="sidebar-link">到底为什么要学习 TypeScript？</a></li><li class="sidebar-sub-header"><a href="/accumulation/TypeScript/TypeScript基础/TypeScript基础.html#ts开发者的四个层级" class="sidebar-link">TS开发者的四个层级</a></li><li class="sidebar-sub-header"><a href="/accumulation/TypeScript/TypeScript基础/TypeScript基础.html#静态类型" class="sidebar-link">静态类型</a></li><li class="sidebar-sub-header"><a href="/accumulation/TypeScript/TypeScript基础/TypeScript基础.html#严谨不失灵活" class="sidebar-link">严谨不失灵活</a></li><li class="sidebar-sub-header"><a href="/accumulation/TypeScript/TypeScript基础/TypeScript基础.html#typescript-没有缺点吗？" class="sidebar-link">TypeScript 没有缺点吗？</a></li><li class="sidebar-sub-header"><a href="/accumulation/TypeScript/TypeScript基础/TypeScript基础.html#开始使用-typescript" class="sidebar-link">开始使用 TypeScript</a></li><li class="sidebar-sub-header"><a href="/accumulation/TypeScript/TypeScript基础/TypeScript基础.html#typescript-的原始类型" class="sidebar-link">Typescript 的原始类型</a></li><li class="sidebar-sub-header"><a href="/accumulation/TypeScript/TypeScript基础/TypeScript基础.html#typescript-中其他常见类型" class="sidebar-link">Typescript 中其他常见类型</a></li><li class="sidebar-sub-header"><a href="/accumulation/TypeScript/TypeScript基础/TypeScript基础.html#深入理解枚举类型" class="sidebar-link">深入理解枚举类型</a></li></ul></li><li><a href="/accumulation/TypeScript/TypeScript实战/TypeScript实战.html" class="sidebar-link">TypeScript实战</a></li><li><a href="/accumulation/TypeScript/TypeScript进阶/TypeScript进阶.html" class="sidebar-link">TypeScript进阶</a></li><li><a href="/accumulation/TypeScript/TypeScript定制/TypeScript定制.html" class="sidebar-link">TypeScript定制</a></li><li><a href="/accumulation/TypeScript/TypeScript工程化/TypeScript工程化.html" class="sidebar-link">TypeScript工程化</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>Vue</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>Webpack</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>Node</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>HTTP</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>Linux</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>Other</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/accumulation/" class="sidebar-heading clickable router-link-active"><span>前端基础面试题</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="到底为什么要学习-typescript？"><a href="#到底为什么要学习-typescript？" class="header-anchor">#</a> 到底为什么要学习 TypeScript？</h2> <ul><li>为大型系统而生：TypeScript 是静态类型化的 JavaScript 超集，在大型工程中有无可比拟的优势，是开发大型系统的必备良药，VSCode、Vue 3.0、Angular都是由TS开发</li> <li>招聘市场需求陡增：从2018年开始 TypeScript 就成为GitHub前10的语言，已经有大量的大厂团队采用 TypeScript 开发，很多招聘要求上有了 TypeScript 的身影，或者必备或者加分项</li> <li>Vue3.0发布在即：统治前端的三大框架Angular、React、Vue，Angular本身就是TS最早的支持者，React 对 TS 支持友好，非常多的团队开始 TS 化，Vue3.0一旦发布，依赖前端框架的业务开发基本上就离不开 TS 了</li> <li>TypeScript 是一门<strong>静态语言</strong>。这也是为什么 「TypeScript 必定赴 coffeescript 后尘，会被标准取代」 这个论断几乎不可能成立的原因之一，coffeescript 本质上是 JavaScript 的语法糖化，ES2015 参考了大量 coffeescript 的内容进行了标准化，因此 coffeescript 的优势也就不存在了，被淘汰在所难免。给一门语言加语法糖是相对容易推进到标准的事情，而直接把一门语言从动态改为静态，还要兼容数以亿计的老旧网站，这个在可预见的时间内几乎不可能发生，TypeScript 与 coffeescript 虽然都是 「Compile to JavaScript Language」，但是 TypeScript 的静态性是它立于<strong>不败之地</strong>的基础。</li></ul> <p><strong>(虽然 Angular 和 Vue 都声称支持 js 开发，但是由于本身用 TS 编写，后续的生态也基于 TS，基本上很少人再用 js 编写相关代码)</strong></p> <h2 id="ts开发者的四个层级"><a href="#ts开发者的四个层级" class="header-anchor">#</a> TS开发者的四个层级</h2> <p>1、业务使用者： 这个层级的开发者可以在业务代码中熟练利用 TypeScript 编码，但是无法进行类型编程，也无法写出一些底层库，仅仅停留在使用阶段</p> <p>2、类型编程者： 这个层级的开发者可以对类型进行编程，可以开发出一些实用的工具类型，对于难以定义的类型也能驾轻就熟</p> <p>3、TS定制者： 这个层级的开发者对 TypeScript 的类型系统比较熟悉，对 TypeScript 的语言设计也有一定的认知，可以开发TypeScript Transformer Plugin来定制化开发 TypeScript</p> <p>4、TS设计者： 这个层面的开发者可以参与到 TypeScript 这门语言的设计中去，基本上能达到PL领域的从业人员的水准</p> <h2 id="静态类型"><a href="#静态类型" class="header-anchor">#</a> 静态类型</h2> <ul><li><p>编程语言的静态类型定义在学术上理解起来比较复杂，简单来说，一门语言在编译时报错，那么是静态语言，如果在运行时报错，那么是动态语言。</p></li> <li><p>这里还有纠正一个概念，TypeScript 是静态弱类型语言，这跟C语言是一样的，并不是所谓的强类型，因为要兼容 JavaScript， 所以 TypeScript 几乎不限制 JavaScript 中原有的隐式类型转换，它对类型的隐式转换是有容忍度的，而真正的静态强类型语言比如 Java、C# 是不会容忍隐式转换的。</p></li> <li><p>那么为什么静态类型是 TypeScript 的杀手锏呢？
归根到底，任何能提升生产力的东西都会被加入工程化的浪潮中，更何况一门静态类型的语言对生产力的提升是质的。</p></li> <li><p>我们先看看在 JavaScript 项目中最常见的十大错误。</p></li></ul> <p><img src="/assets/img/1.029ad9a7.png" alt="An image"></p> <p>我们是不是耳熟能详？这些低级错误占用了大量 debug 和 google 的时间，而如果你用 TypeScript 可以在编写阶段就规避了，自从我们用了 TypeScript 之后，低级报错基本就没犯过，大多数情况下是我们自身编写的程序逻辑错误。</p> <p>很多项目，尤其是中大型项目，我们是需要团队多人协作的，那么如何保证协作呢？这个时候可能需要大量的文档和注释，显式类型就是最好的注释，而通过 TypeScript 提供的类型提示功能我们可以非常舒服地调用同伴的代码，由于 TypeScript 的存在我们可以节省大量沟通成本、代码阅读成本等等。</p> <p>所以我对这句话「静态类型不是银弹，大型项目依然可以用 JavaScript 编写」持怀疑态度，静态类型固然不是银弹，但是它对多人协作的大型项目的友好程度是远超动态语言的，我们既然有了更好的工具为什么不用呢？</p> <p>而实际上各大用动态语言的项目在这些年随着项目复杂度增加，开始逐渐进行静态化，有人会问「谷歌、Facebook 不都还在用 js、php、Python吗？」</p> <p>其实不是的，这些大厂用的 php、Python、js 跟普通人用的不一样，比如 Facebook 的 js 背后有一个叫做 FlowType 的静态类型检查器，React 和 Vue 2.x 就是用的这个类型检查器，再比如 Facebook 的 Python，他背后也有一个叫做pyre-check 的静态类型检查器，实际上是虽然他们在用动态语言，但是大厂养活着一个庞大的团队来开发各种静态分析工具把动态语言变成静态的。</p> <h2 id="严谨不失灵活"><a href="#严谨不失灵活" class="header-anchor">#</a> 严谨不失灵活</h2> <p>很多人以为用了 TypeScript 之后就会丧失 JavaScript 的灵活性，其实并不是。</p> <p>首先，我们得承认 JavaScript 的灵活性对于中大型项目弊远远大于利，其次，TypeScript 由于兼容 JavaScript 所以其灵活度可以媲美 JavaScript，比如你可以把任何想灵活的地方将类型定义为 any 即可，把 TypeScript 变为 AnyScript 就能保持它的灵活度，毕竟TypeScript 对类型的检查严格程度是可以通过 tsconfig.json 来配置的。</p> <p>即使在开启 strict 状态下的 TypeScript 依然是很灵活的，因为为了兼容 JavaScript，TypeScript 采用了Structural Type System。</p> <p>因此，TypeScript 并不是类型定义本身，而是类型定义的形状（Shape），我们看个例子：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
  <span class="token function">method</span><span class="token punctuation">(</span>input<span class="token punctuation">:</span> string<span class="token punctuation">)</span><span class="token punctuation">:</span> number <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Bar</span> <span class="token punctuation">{</span>
  <span class="token function">method</span><span class="token punctuation">(</span>input<span class="token punctuation">:</span> string<span class="token punctuation">)</span><span class="token punctuation">:</span> number <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> foo<span class="token punctuation">:</span> Foo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Okay.</span>
<span class="token keyword">const</span> bar<span class="token punctuation">:</span> Bar <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Okay.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>以上代码是不会报错的，因为他们的「形状」是一样的，而类似的代码在 Java 或者 C# 中是会报错的。
这就是 TypeScript 类型系统设计之初就考虑到了 JavaScript 灵活性，专门选择了 Structural Type System（结构类型系统）。</p> <h2 id="typescript-没有缺点吗？"><a href="#typescript-没有缺点吗？" class="header-anchor">#</a> TypeScript 没有缺点吗？</h2> <p>我们说了这么多 TypeScript 相比 JavaScript 的优势，难道 TypeScript 是没有缺点的吗？</p> <p>严格来讲，TypeScript 的缺点相比于它带来的生产力上的提升是可以忽略不计的，而一些缺点并不是 TypeScript 本身带来的。</p> <p>比如，与实际框架结合会有很多坑，我们一开始学习在框架中运用 TypeScript 的时候会花大量的时间在踩坑上，因为我们需要额外学习框架定义的 d.ts,而单单是官方入门文档的知识又不足以让我们很舒服地编写代码</p> <p>比如，配置学习成本高，目前的前端脚手架基本上是以 JavaScript 为主，虽然 TypeScript 已经非常火了，但是相比于 JavaScript 多年积累的生态还是稍显不如，因此很多时候我们需要自己定制脚手架，比如同样是用 ESLint 做语法检查，其配置方式跟JavaScript完全不同，需要额外学习成本，配置 TypeScript 的 tsconfig.json ，用 ts-plugin-import 进行按需引入等等，都是需要额外学习成本的</p> <p>再比如，TypeScript 的类型系统其实比较复杂，又是额外的学习成本，比如下面的类型定义，只通过官方文档你是不知道在干什么的：</p> <p><img src="/assets/img/2.eff0cac2.png" alt="An image"></p> <h2 id="开始使用-typescript"><a href="#开始使用-typescript" class="header-anchor">#</a> 开始使用 TypeScript</h2> <p>在开始使用 TypeScript 前你最好有以下准备：</p> <ul><li>Node.js &gt; 8.0，最好是最新的稳定版（目前是V10.16.3 ）</li> <li>一个包管理工具 npm 或者 yarn</li> <li>一个文本编辑器或者 IDE (笔者的是 vscode)</li> <li>相关的 shell 命令仅适用于 *nix 系统，windows 系统不适用</li></ul> <h3 id="安装-typescript"><a href="#安装-typescript" class="header-anchor">#</a> 安装 TypeScript</h3> <p>TypeScript 的安装很简单，你可以通过npm直接在全局安装 TypeScript。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&gt;</span> npm install <span class="token operator">-</span>g typescript
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="创建环境"><a href="#创建环境" class="header-anchor">#</a> 创建环境</h3> <p>随后我们要创建一个目录：</p> <blockquote><p>mkdir ts-study &amp;&amp; cd ts-study</p></blockquote> <p>接着创建 src 目录：</p> <blockquote><p>mkdir src &amp;&amp; touch src/index.ts</p></blockquote> <p>接着我们用npm将目录初始化：</p> <blockquote><p>npm init</p></blockquote> <p>此时我们要使用 TypeScript 的话通常也需要初始化：</p> <blockquote><p>tsc --init</p></blockquote> <p>这个时候你会发现目录下多了一个tsconfig.json文件.</p> <p>这是 TypeScript 的配置文件，里面已经包含官方初始化的一些配置以及注释，我们现在进行自定义的配置：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;compilerOptions&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;target&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;es5&quot;</span><span class="token punctuation">,</span>                            <span class="token comment">// 指定 ECMAScript 目标版本: 'ES5'</span>
    <span class="token string">&quot;module&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;commonjs&quot;</span><span class="token punctuation">,</span>                       <span class="token comment">// 指定使用模块: 'commonjs', 'amd', 'system', 'umd' or 'es2015'</span>
    <span class="token string">&quot;moduleResolution&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>                 <span class="token comment">// 选择模块解析策略</span>
    <span class="token string">&quot;experimentalDecorators&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>             <span class="token comment">// 启用实验性的ES装饰器</span>
    <span class="token string">&quot;allowSyntheticDefaultImports&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>       <span class="token comment">// 允许从没有设置默认导出的模块中默认导入。</span>
    <span class="token string">&quot;sourceMap&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                          <span class="token comment">// 把 ts 文件编译成 js 文件的时候，同时生成对应的 map 文件</span>
    <span class="token string">&quot;strict&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                             <span class="token comment">// 启用所有严格类型检查选项</span>
    <span class="token string">&quot;noImplicitAny&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                      <span class="token comment">// 在表达式和声明上有隐含的 any类型时报错</span>
    <span class="token string">&quot;alwaysStrict&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                       <span class="token comment">// 以严格模式检查模块，并在每个文件里加入 'use strict'</span>
    <span class="token string">&quot;declaration&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                        <span class="token comment">// 生成相应的.d.ts文件</span>
    <span class="token string">&quot;removeComments&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                     <span class="token comment">// 删除编译后的所有的注释</span>
    <span class="token string">&quot;noImplicitReturns&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                  <span class="token comment">// 不是函数的所有返回路径都有返回值时报错</span>
    <span class="token string">&quot;importHelpers&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                      <span class="token comment">// 从 tslib 导入辅助工具函数</span>
    <span class="token string">&quot;lib&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;es6&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dom&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                      <span class="token comment">// 指定要包含在编译中的库文件</span>
    <span class="token string">&quot;typeRoots&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;node_modules/@types&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;outDir&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;./dist&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;rootDir&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;./src&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;include&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>                                  <span class="token comment">// 需要编译的ts文件一个*表示文件匹配**表示忽略文件的深度问题</span>
    <span class="token string">&quot;./src/**/*.ts&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;exclude&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;dist&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;**/*.test.ts&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>然后在package.json中加入我们的script命令：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;ts-study&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;version&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;description&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;main&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;src/index.ts&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;build&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;tsc&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 编译</span>
    <span class="token string">&quot;build:w&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;tsc -w&quot;</span> <span class="token comment">// 监听文件，有变动即编译</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;author&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;license&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;devDependencies&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;typescript &quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^3.6.4&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="编写第一个-typescript-程序"><a href="#编写第一个-typescript-程序" class="header-anchor">#</a> 编写第一个 TypeScript 程序</h3> <p>在src/index.ts中输入以下代码:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">greeter</span><span class="token punctuation">(</span><span class="token parameter">person</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;Hello, &quot;</span> <span class="token operator">+</span> person
<span class="token punctuation">}</span>

<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token string">&quot;Jane User&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这个时候你会看到一个警告,这个警告在官方默认配置中是不会出现的,正是由于我们开启了 noImplicitAny 选项,对于隐式含有 any 类型的参数或者变量进行警告⚠️.</p> <p><img src="/assets/img/3.407a3b34.png" alt="An image"></p> <p>之所以一开始就开启严格模式，是因为一旦你开始放任any类型的泛滥，就会把 TypeScript 变成 AnyScript ，会很难改掉这个恶习，所以从一开始就要用规范的 TypeScript 编码习惯。</p> <p>我们进行修改如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">greeter</span><span class="token punctuation">(</span><span class="token parameter">person<span class="token punctuation">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;Hello, &quot;</span> <span class="token operator">+</span> person
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>此时我们可以看到，greeter函数自动加上了返回值类型，这是 TypeScript 自带的类型推导。</p> <p><img src="/assets/img/4.541db01a.png" alt="An image"></p> <h2 id="typescript-的原始类型"><a href="#typescript-的原始类型" class="header-anchor">#</a> Typescript 的原始类型</h2> <p>如果你了解 JavaScript 的基础类型，那么这一节你会很好理解。</p> <p>TypeScript的原始类型包括: boolean、number、string、void、undefined、null、symbol、bigint。</p> <h3 id="布尔类型"><a href="#布尔类型" class="header-anchor">#</a> 布尔类型</h3> <p>我们用 boolean 来表示布尔类型，注意开头是小写的，如果你在Typescript文件中写成 Boolean 那代表是 JavaScript 中的布尔对象，这是新手常犯的错误。</p> <p>const isLoading: boolean = false
这里需要提示一下，很多 TypeScript 的原始类型比如 boolean、number、string等等，在JavaScript中都有类似的关键字 Boolean、Number、String，后者是 JavaScript 的构造函数，比如我们用 Number 用于数字类型转化或者构造 Number 对象用的，而 TypeScript 中的 number 类型仅仅是表示类型，两者完全不同。</p> <p>数字
JavaScript中的二进制、十进制、十六进制等数都可以用 number 类型表示。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> decLiteral<span class="token punctuation">:</span> number <span class="token operator">=</span> <span class="token number">6</span>
<span class="token keyword">const</span> hexLiteral<span class="token punctuation">:</span> number <span class="token operator">=</span> <span class="token number">0xf00d</span>
<span class="token keyword">const</span> binaryLiteral<span class="token punctuation">:</span> number <span class="token operator">=</span> <span class="token number">0b1010</span>
<span class="token keyword">const</span> octalLiteral<span class="token punctuation">:</span> number <span class="token operator">=</span> <span class="token number">0o744</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="字符串"><a href="#字符串" class="header-anchor">#</a> 字符串</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> book<span class="token punctuation">:</span> string <span class="token operator">=</span> <span class="token string">'深入浅出 Typescript'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="空值"><a href="#空值" class="header-anchor">#</a> 空值</h3> <p>表示没有任何类型，当一个函数没有返回值时，你通常会见到其返回值类型是 void：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">warnUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;This is my warning message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>实际上只有null和undefined可以赋给void:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> a<span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token operator">=</span> <span class="token keyword">undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Null 和 Undefined
TypeScript 里，undefined 和 null 两者各自有自己的类型分别叫做 undefined 和 null，和void相似，它们的本身的类型用处不是很大：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> a<span class="token punctuation">:</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b<span class="token punctuation">:</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>默认情况下 null 和 undefined 是所有类型的子类型，就是说你可以把 null 和 undefined 赋值给 number 类型的变量。</p> <p>但是在正式项目中一般都是开启 --strictNullChecks 检测的，即 null 和 undefined 只能赋值给 any 和它们各自(一个例外是 undefined 是也可以分配给void)，可以规避非常多的问题。</p> <h3 id="symbol"><a href="#symbol" class="header-anchor">#</a> Symbol</h3> <p>注意：我们在使用 Symbol 的时候，必须添加 es6 的编译辅助库,如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string">&quot;lib&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;es6&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dom&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                      <span class="token comment">// 指定要包含在编译中的库文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Symbol 是在ES2015之后成为新的原始类型,它通过 Symbol 构造函数创建:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> sym1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'key1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sym2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'key2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>而且 Symbol 的值是唯一不变的：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'key1'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'key1'</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="bigint"><a href="#bigint" class="header-anchor">#</a> BigInt</h3> <p>BigInt 类型在 TypeScript3.2 版本被内置，使用 BigInt 可以安全地存储和操作大整数，即使这个数已经超出了JavaScript构造函数 Number 能够表示的安全整数范围。</p> <p>注意：我们在使用 BigInt 的时候，必须添加 ESNext 的编译辅助库,如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string">&quot;lib&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;es6&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dom&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ESNext&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在 JavaScript 中采用双精度浮点数,这导致精度有限，比如 Number.MAX_SAFE_INTEGER 给出了可以安全递增的最大可能整数，即2**53-1,我们看一下案例:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> max <span class="token operator">=</span> Number<span class="token punctuation">.</span><span class="token constant">MAX_SAFE_INTEGER</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> max1 <span class="token operator">=</span> max <span class="token operator">+</span> <span class="token number">1</span>
<span class="token keyword">const</span> max2 <span class="token operator">=</span> max <span class="token operator">+</span> <span class="token number">2</span>

max1 <span class="token operator">===</span> max2 <span class="token comment">//true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>max1与max2居然相等？这就是超过精读范围造成的问题，而BigInt正是解决这类问题而生的:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 注意，这里是 JavaScript 代码，并不是 typescript</span>
<span class="token keyword">const</span> max <span class="token operator">=</span> <span class="token function">BigInt</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token constant">MAX_SAFE_INTEGER</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> max1 <span class="token operator">=</span> max <span class="token operator">+</span> <span class="token number">1n</span>
<span class="token keyword">const</span> max2 <span class="token operator">=</span> max <span class="token operator">+</span> <span class="token number">2n</span>

max1 <span class="token operator">===</span> max2 <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>值得注意的是我们需要用 BigInt(number) 把 Number 转化为 BigInt,同时如果类型是 BigInt ,那么数字后面需要加 n ,就如同上面例子的 const max1 = max + 1n 中的 1n。</p> <p>在TypeScript中，number 类型虽然和 BigInt 都是有表示数字的意思，但是实际上两者类型是不同的:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>declare <span class="token keyword">let</span> foo<span class="token punctuation">:</span> number<span class="token punctuation">;</span>
declare <span class="token keyword">let</span> bar<span class="token punctuation">:</span> bigint<span class="token punctuation">;</span>

foo <span class="token operator">=</span> bar<span class="token punctuation">;</span> <span class="token comment">// error: Type 'bigint' is not assignable to type 'number'.</span>
bar <span class="token operator">=</span> foo<span class="token punctuation">;</span> <span class="token comment">// error: Type 'number' is not assignable to type 'bigint'.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>我们总结一下 TypeScript 中的原始类型：</strong></p> <ul><li>布尔类型：boolean</li> <li>数字类型：number</li> <li>字符串类型：string</li> <li>空值：void</li> <li>Null 和 Undefined：null 和 undefined</li> <li>Symbol 类型：symbol</li> <li>BigInt 大数整数类型：bigint</li></ul> <h2 id="typescript-中其他常见类型"><a href="#typescript-中其他常见类型" class="header-anchor">#</a> Typescript 中其他常见类型</h2> <h3 id="any"><a href="#any" class="header-anchor">#</a> any</h3> <h3 id="unknown"><a href="#unknown" class="header-anchor">#</a> unknown</h3> <p>unknown 是 TypeScript 3.0 引入了新类型,是 any 类型对应的安全类型。</p> <p>unknown 和 any 的主要区别是 unknown 类型会更加严格:在对unknown类型的值执行大多数操作之前,我们必须进行某种形式的检查,而在对 any 类型的值执行操作之前,我们不必进行任何检查。</p> <p>看看它们的区别在哪里</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> value<span class="token punctuation">:</span> any<span class="token punctuation">;</span>

value<span class="token punctuation">.</span>foo<span class="token punctuation">.</span>bar<span class="token punctuation">;</span>  <span class="token comment">// OK</span>
<span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// OK</span>
<span class="token keyword">new</span> <span class="token class-name">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// OK</span>
value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">// OK</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>如果是 unknown 类型,那么结果大不相同:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> value<span class="token punctuation">:</span> unknown<span class="token punctuation">;</span>

value<span class="token punctuation">.</span>foo<span class="token punctuation">.</span>bar<span class="token punctuation">;</span>  <span class="token comment">// ERROR</span>
<span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ERROR</span>
<span class="token keyword">new</span> <span class="token class-name">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ERROR</span>
value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">// ERROR</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>我们看到,这就是 unknown 与 any 的不同之处,虽然它们都可以是任何类型,但是当 unknown 类型被确定是某个类型之前,它不能被进行任何操作比如实例化、getter、函数执行等等。</p> <h3 id="never"><a href="#never" class="header-anchor">#</a> never</h3> <p>never 类型表示的是那些永不存在的值的类型，never 类型是任何类型的子类型，也可以赋值给任何类型；然而，没有类型是 never 的子类型或可以赋值给 never 类型（除了never本身之外）。</p> <blockquote><p>即使any也不可以赋值给never。1</p></blockquote> <p>两个场景中 never 比较常见:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 抛出异常的函数永远不会有返回值</span>
<span class="token keyword">function</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token parameter">message<span class="token punctuation">:</span> string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> never <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 空数组，而且永远是空的</span>
<span class="token keyword">const</span> empty<span class="token punctuation">:</span> never<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="数组"><a href="#数组" class="header-anchor">#</a> 数组</h3> <p>数组有两种类型定义方式，一种是使用泛型:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> list<span class="token punctuation">:</span> Array<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>另一种使用更加广泛那就是在元素类型后面接上 []:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> list<span class="token punctuation">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="元组"><a href="#元组" class="header-anchor">#</a> 元组</h3> <p>元组类型与数组类型非常相似，表示一个已知元素数量和类型的数组，各元素的类型不必相同。</p> <p>比如，你可以定义一对值分别为string和number类型的元组。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> x<span class="token punctuation">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">,</span> number<span class="token punctuation">]</span><span class="token punctuation">;</span>
x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">]</span> <span class="token comment">// Error</span>
x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">]</span> <span class="token comment">// Error</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>我们看到，这就是元组与数组的不同之处，元组的类型如果多出或者少于规定的类型是会报错的，必须严格跟事先声明的类型一致才不会报错
那么有人会问，我们的类型完全一致，只是顺序错了有没有问题，比如上个例子中我们把 string、number 调换位置：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> x<span class="token punctuation">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">,</span> number<span class="token punctuation">]</span><span class="token punctuation">;</span>
x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>
x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'hello'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>我们看到，元组非常严格，即使类型的顺序不一样也会报错。</p> <p>元组中包含的元素，必须与声明的类型一致，而且不能多、不能少，甚至顺序不能不符。</p> <p>我们可以把元组看成严格版的数组，比如[string, number]我们可以看成是:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">Tuple</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span><span class="token operator">&lt;</span>string <span class="token operator">|</span> number<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token number">0</span><span class="token punctuation">:</span> string<span class="token punctuation">;</span>
  <span class="token number">1</span><span class="token punctuation">:</span> number<span class="token punctuation">;</span>
  length<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>元组继承于数组，但是比数组拥有更严格的类型检查。</p> <p>此外，还有一个个元组越界问题，比如 Typescript 允许向元组中使用数组的push方法插入新元素:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> tuple<span class="token punctuation">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">,</span> number<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
tuple<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ok</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tuple<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;a&quot;, 1, 2] -&gt; 正常打印出来</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>但是当我们访问新加入的元素时，会报错:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tuple<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Tuple type '[string, number]' of length '2' has no element at index '2'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="object"><a href="#object" class="header-anchor">#</a> Object</h3> <p>object 表示非原始类型，也就是除 number，string，boolean，symbol，null 或 undefined 之外的类型。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
    Center <span class="token operator">=</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> value<span class="token punctuation">:</span> object

value <span class="token operator">=</span> Direction
value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'hello'</span><span class="token punctuation">]</span>
value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>我们看到,普通对象、枚举、数组、元组通通都是 object 类型。</p> <h2 id="深入理解枚举类型"><a href="#深入理解枚举类型" class="header-anchor">#</a> 深入理解枚举类型</h2> <p>枚举类型是很多语言都拥有的类型,它用于声明一组命名的常数,当一个变量有几种可能的取值时,可以将它定义为枚举类型。</p> <h3 id="数字枚举"><a href="#数字枚举" class="header-anchor">#</a> 数字枚举</h3> <p>当我们声明一个枚举类型是,虽然没有给它们赋值,但是它们的值其实是默认的数字类型,而且默认从0开始依次累加:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
    Up<span class="token punctuation">,</span>
    Down<span class="token punctuation">,</span>
    Left<span class="token punctuation">,</span>
    Right
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Direction<span class="token punctuation">.</span>Up <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Direction<span class="token punctuation">.</span>Down <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Direction<span class="token punctuation">.</span>Left <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Direction<span class="token punctuation">.</span>Right <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>因此当我们把第一个值赋值后,后面也会根据第一个值进行累加:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
    Up <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>
    Down<span class="token punctuation">,</span>
    Left<span class="token punctuation">,</span>
    Right
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Direction<span class="token punctuation">.</span>Up<span class="token punctuation">,</span> Direction<span class="token punctuation">.</span>Down<span class="token punctuation">,</span> Direction<span class="token punctuation">.</span>Left<span class="token punctuation">,</span> Direction<span class="token punctuation">.</span>Right<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10 11 12 13</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="字符串枚举"><a href="#字符串枚举" class="header-anchor">#</a> 字符串枚举</h3> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
    Up <span class="token operator">=</span> <span class="token string">'Up'</span><span class="token punctuation">,</span>
    Down <span class="token operator">=</span> <span class="token string">'Down'</span><span class="token punctuation">,</span>
    Left <span class="token operator">=</span> <span class="token string">'Left'</span><span class="token punctuation">,</span>
    Right <span class="token operator">=</span> <span class="token string">'Right'</span>
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Direction<span class="token punctuation">[</span><span class="token string">'Right'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Direction<span class="token punctuation">.</span>Up<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Right Up</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="异构枚举"><a href="#异构枚举" class="header-anchor">#</a> 异构枚举</h3> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">enum</span> BooleanLikeHeterogeneousEnum <span class="token punctuation">{</span>
    No <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    Yes <span class="token operator">=</span> <span class="token string">&quot;YES&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="反向映射"><a href="#反向映射" class="header-anchor">#</a> 反向映射</h3> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
    Up<span class="token punctuation">,</span>
    Down<span class="token punctuation">,</span>
    Left<span class="token punctuation">,</span>
    Right
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Direction<span class="token punctuation">.</span>Up <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Direction<span class="token punctuation">.</span>Down <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Direction<span class="token punctuation">.</span>Left <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Direction<span class="token punctuation">.</span>Right <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>这就是我们数字枚举那一部分的例子，我们可以通过枚举名字获取枚举值，这当然看起来没问题，那么能不能通过枚举值获取枚举名字呢？</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
    Up<span class="token punctuation">,</span>
    Down<span class="token punctuation">,</span>
    Left<span class="token punctuation">,</span>
    Right
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Direction<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Up</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>这就很奇怪了，我们印象中一个 JavaScript 对象一般都是正向映射的，即 name =&gt; value，为什么在枚举中是可以正反向同时映射的？即 name &lt;=&gt; value。</p> <p>我们往下看，通过了解枚举的本质，我们就可以理解这种正反向同时映射的特性了。</p> <h3 id="枚举的本质"><a href="#枚举的本质" class="header-anchor">#</a> 枚举的本质</h3> <p>以上面的 Direction 枚举类型为例,我们不妨看一下枚举类型被编译为 JavaScript 后是什么样子:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> Direction<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">Direction</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Direction<span class="token punctuation">[</span>Direction<span class="token punctuation">[</span><span class="token string">&quot;Up&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Up&quot;</span><span class="token punctuation">;</span>
    Direction<span class="token punctuation">[</span>Direction<span class="token punctuation">[</span><span class="token string">&quot;Down&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">11</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Down&quot;</span><span class="token punctuation">;</span>
    Direction<span class="token punctuation">[</span>Direction<span class="token punctuation">[</span><span class="token string">&quot;Left&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Left&quot;</span><span class="token punctuation">;</span>
    Direction<span class="token punctuation">[</span>Direction<span class="token punctuation">[</span><span class="token string">&quot;Right&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">13</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Right&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Direction <span class="token operator">||</span> <span class="token punctuation">(</span>Direction <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>这个编译后的代码可能看起来比较复杂,不过我们可以把Direction看成一个对象,比如我们在 TypeScript 中做几个小实验:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
    Up <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>
    Down<span class="token punctuation">,</span>
    Left<span class="token punctuation">,</span>
    Right
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Direction<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Direction<span class="token punctuation">[</span><span class="token string">'Right'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Up 13</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>原因就在编译后的 JavaScript 中体现出来了,因为 Direction[Direction[&quot;Up&quot;] = 10] = &quot;Up&quot; 也就是 Direction[10] = &quot;Up&quot; ,所以我们可以把枚举类型看成一个JavaScript对象，而由于其特殊的构造，导致其拥有正反向同时映射的特性。</p> <h3 id="常量枚举"><a href="#常量枚举" class="header-anchor">#</a> 常量枚举</h3> <p>枚举其实可以被 const 声明为常量的,这样有什么好处?我们看以下例子:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">const</span> <span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
    Up <span class="token operator">=</span> <span class="token string">'Up'</span><span class="token punctuation">,</span>
    Down <span class="token operator">=</span> <span class="token string">'Down'</span><span class="token punctuation">,</span>
    Left <span class="token operator">=</span> <span class="token string">'Left'</span><span class="token punctuation">,</span>
    Right <span class="token operator">=</span> <span class="token string">'Right'</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> a <span class="token operator">=</span> Direction<span class="token punctuation">.</span>Up<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>大家猜一下它被编译为 JavaScript 后是怎样的?</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">&quot;Up&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>我们在上面看到枚举类型会被编译为 JavaScript 对象,怎么这里没有了?</p> <p>这就是常量枚举的作用,因为下面的变量 a 已经使用过了枚举类型,之后就没有用了,也没有必要存在与 JavaScript 中了, TypeScript 在这一步就把 Direction 去掉了,我们直接使用 Direction 的值即可,这是性能提升的一个方案。</p> <blockquote><p>如果你非要 TypeScript 保留对象 Direction ,那么可以添加编译选项 --preserveConstEnums</p></blockquote> <h3 id="联合枚举与枚举成员的类型"><a href="#联合枚举与枚举成员的类型" class="header-anchor">#</a> 联合枚举与枚举成员的类型</h3> <p>我们假设枚举的所有成员都是字面量类型的值，那么枚举的每个成员和枚举值本身都可以作为类型来使用，</p> <ul><li>任何字符串字面量,如：</li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">const</span> <span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
    Up <span class="token operator">=</span> <span class="token string">'Up'</span><span class="token punctuation">,</span>
    Down <span class="token operator">=</span> <span class="token string">'Down'</span><span class="token punctuation">,</span>
    Left <span class="token operator">=</span> <span class="token string">'Left'</span><span class="token punctuation">,</span>
    Right <span class="token operator">=</span> <span class="token string">'Right'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>任何数字字面量,如：</li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
    Up<span class="token punctuation">,</span>
    Down<span class="token punctuation">,</span>
    Left<span class="token punctuation">,</span>
    Right
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>应用了一元-符号的数字字面量,如:</li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
    Up <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
    Down <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span>
    Left <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span>
    Right <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="枚举成员类型"><a href="#枚举成员类型" class="header-anchor">#</a> 枚举成员类型</h3> <p>当所有枚举成员都拥有字面量枚举值时，它就带有了一种特殊的语义，即枚举成员成为了类型。</p> <p>比如我们声明一个数字类型：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
    Up<span class="token punctuation">,</span>
    Down<span class="token punctuation">,</span>
    Left<span class="token punctuation">,</span>
    Right
<span class="token punctuation">}</span>

<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">0</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">===</span> Direction<span class="token punctuation">.</span>Up<span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>我们把成员当做值使用，看来是没问题的，因为成员值本身就是0，那么我们再加几行代码：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">type</span> c <span class="token operator">=</span> <span class="token number">0</span>

<span class="token keyword">declare</span> <span class="token keyword">let</span> b<span class="token punctuation">:</span> c

b <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 不能将类型“1”分配给类型“0”</span>
b <span class="token operator">=</span> Direction<span class="token punctuation">.</span>Up <span class="token comment">// ok</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>我们看到，上面的结果显示这个枚举的成员居然也可以被当做类型使用，这就是枚举成员当做类型使用的情况。</p> <h3 id="联合枚举类型"><a href="#联合枚举类型" class="header-anchor">#</a> 联合枚举类型</h3> <p>由于联合联合枚举，类型系统可以知道枚举里的值的集合。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
    Up<span class="token punctuation">,</span>
    Down<span class="token punctuation">,</span>
    Left<span class="token punctuation">,</span>
    Right
<span class="token punctuation">}</span>

<span class="token keyword">declare</span> <span class="token keyword">let</span> a<span class="token punctuation">:</span> Direction

<span class="token keyword">enum</span> Animal <span class="token punctuation">{</span>
    Dog<span class="token punctuation">,</span>
    Cat
<span class="token punctuation">}</span>

a <span class="token operator">=</span> Direction<span class="token punctuation">.</span>Up <span class="token comment">// ok</span>
a <span class="token operator">=</span> Animal<span class="token punctuation">.</span>Dog <span class="token comment">// 不能将类型“Animal.Dog”分配给类型“Direction”</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>我们把 a 声明为 Direction 类型，可以看成我们声明了一个联合类型 Direction.Up | Direction.Down | Direction.Left | Direction.Right，只有这四个类型其中的成员才符合要求。</p> <h3 id="枚举合并"><a href="#枚举合并" class="header-anchor">#</a> 枚举合并</h3> <p>我们可以分开声明枚举,他们会自动合并</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
    Up <span class="token operator">=</span> <span class="token string">'Up'</span><span class="token punctuation">,</span>
    Down <span class="token operator">=</span> <span class="token string">'Down'</span><span class="token punctuation">,</span>
    Left <span class="token operator">=</span> <span class="token string">'Left'</span><span class="token punctuation">,</span>
    Right <span class="token operator">=</span> <span class="token string">'Right'</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
    Center <span class="token operator">=</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>编译为 JavaScript 后的代码如下:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">var</span> Direction<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">Direction</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Direction<span class="token punctuation">[</span><span class="token string">&quot;Up&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Up&quot;</span><span class="token punctuation">;</span>
    Direction<span class="token punctuation">[</span><span class="token string">&quot;Down&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Down&quot;</span><span class="token punctuation">;</span>
    Direction<span class="token punctuation">[</span><span class="token string">&quot;Left&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Left&quot;</span><span class="token punctuation">;</span>
    Direction<span class="token punctuation">[</span><span class="token string">&quot;Right&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Right&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Direction <span class="token operator">||</span> <span class="token punctuation">(</span>Direction <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">Direction</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Direction<span class="token punctuation">[</span>Direction<span class="token punctuation">[</span><span class="token string">&quot;Center&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Center&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Direction <span class="token operator">||</span> <span class="token punctuation">(</span>Direction <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>因此上面的代码并不冲突。</p> <h3 id="为枚举添加静态方法"><a href="#为枚举添加静态方法" class="header-anchor">#</a> 为枚举添加静态方法</h3> <p>借助 namespace 命名空间，我们甚至可以给枚举添加静态方法。</p> <p>我们举个简单的例子，假设有十二个月份:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">enum</span> Month <span class="token punctuation">{</span>
    January<span class="token punctuation">,</span>
    February<span class="token punctuation">,</span>
    March<span class="token punctuation">,</span>
    April<span class="token punctuation">,</span>
    May<span class="token punctuation">,</span>
    June<span class="token punctuation">,</span>
    July<span class="token punctuation">,</span>
    August<span class="token punctuation">,</span>
    September<span class="token punctuation">,</span>
    October<span class="token punctuation">,</span>
    November<span class="token punctuation">,</span>
    December<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>我们要编写一个静态方法，这个方法可以帮助我们把夏天的月份找出来:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">isSummer</span><span class="token punctuation">(</span><span class="token parameter">month<span class="token punctuation">:</span> Month</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>month<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> Month<span class="token punctuation">.</span>June<span class="token punctuation">:</span>
        <span class="token keyword">case</span> Month<span class="token punctuation">.</span>July<span class="token punctuation">:</span>
        <span class="token keyword">case</span> Month<span class="token punctuation">.</span>August<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>想要把两者结合就需要借助命名空间的力量了:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">namespace</span> Month <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">isSummer</span><span class="token punctuation">(</span><span class="token parameter">month<span class="token punctuation">:</span> Month</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>month<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> Month<span class="token punctuation">.</span>June<span class="token punctuation">:</span>
            <span class="token keyword">case</span> Month<span class="token punctuation">.</span>July<span class="token punctuation">:</span>
            <span class="token keyword">case</span> Month<span class="token punctuation">.</span>August<span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Month<span class="token punctuation">.</span><span class="token function">isSummer</span><span class="token punctuation">(</span>Month<span class="token punctuation">.</span>January<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/accumulation/JS/原生JS与Promise对ajax操作.html" class="prev">原生JS与Promise对ajax操作</a></span> <span class="next"><a href="/accumulation/TypeScript/TypeScript实战/TypeScript实战.html">TypeScript实战</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6e5cd8bf.js" defer></script><script src="/assets/js/2.f4f4c0ef.js" defer></script><script src="/assets/js/16.cef412aa.js" defer></script>
  </body>
</html>
