(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{444:function(t,a,e){"use strict";e.r(a);var o=e(0),r=Object(o.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h4",{attrs:{id:"什么是同源策略？"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#什么是同源策略？"}},[t._v("#")]),t._v(" 什么是同源策略？")]),t._v(" "),e("p",[t._v('1995年，同源政策由 Netscape 公司引入浏览器。目前，所有浏览器都实行这个政策。最初，它的含义是指，A网页设置的 Cookie，B网页不能打开，除非这两个网页"同源"。所谓"同源"指的是"三个相同"。')]),t._v(" "),e("ul",[e("li",[t._v("协议相同")]),t._v(" "),e("li",[t._v("域名相同")]),t._v(" "),e("li",[t._v("端口相同")])]),t._v(" "),e("h4",{attrs:{id:"非同源策略有三种行为限制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#非同源策略有三种行为限制"}},[t._v("#")]),t._v(" 非同源策略有三种行为限制")]),t._v(" "),e("ul",[e("li",[t._v("Cookie、localStorage和indexDB 无法读取")]),t._v(" "),e("li",[t._v("DOM 无法获得")]),t._v(" "),e("li",[t._v("Ajax 无法发送")])]),t._v(" "),e("p",[t._v("localStorage存储内存5M，超过2.5存在性能问题")]),t._v(" "),e("h4",{attrs:{id:"浏览器不同的域名不能访问对应的cookie-但是内部的表单没有限制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#浏览器不同的域名不能访问对应的cookie-但是内部的表单没有限制"}},[t._v("#")]),t._v(" 浏览器不同的域名不能访问对应的cookie 但是内部的表单没有限制")]),t._v(" "),e("h4",{attrs:{id:"如何设置同源策略（hosts）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何设置同源策略（hosts）"}},[t._v("#")]),t._v(" 如何设置同源策略（hosts）")]),t._v(" "),e("p",[t._v("test.xxxx.com a.html")]),t._v(" "),e("pre",[e("code",[t._v("<script>\n    document.domain = 'xxxx.com'//设置同源策略\n    document.cookie = 'test1=hello';\n<\/script>\n")])]),t._v(" "),e("p",[t._v("test.xxxx.com b.html")]),t._v(" "),e("pre",[e("code",[t._v("<script>\n    document.cookie\n<\/script>\n")])]),t._v(" "),e("p",[t._v("注意，这种方法只适用于 Cookie 和 iframe 窗口，LocalStorage 和 IndexDB 无法通过这种方法")]),t._v(" "),e("p",[t._v("另外，服务器也可以在设置Cookie的时候，指定Cookie的所属域名为一级域名，比如.xxxx.com。")]),t._v(" "),e("pre",[e("code",[t._v("Set-Cookie: key=value; domain=.example.com; path=/\n")])]),t._v(" "),e("h4",{attrs:{id:"常见的解决跨域方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常见的解决跨域方案"}},[t._v("#")]),t._v(" 常见的解决跨域方案")]),t._v(" "),e("pre",[e("code",[t._v("img标签 iframe script jsonp(callback与后端进行约定) link(background)\n")])]),t._v(" "),e("h6",{attrs:{id:"jsonp-原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jsonp-原理"}},[t._v("#")]),t._v(" jsonp 原理")]),t._v(" "),e("pre",[e("code",[t._v('<script src="http://wwww.test.com/index.php?callback=test"><\/script>\n\n<script>\nfunction test(data){\n    console.log(data)\n}\n<\/script>\n\nphp 部分\nif(callback) {\n    test({"data":"约定成功"})\n}\n')])]),t._v(" "),e("h6",{attrs:{id:"标签拓展-测试用户网速，根据用户网速给出用户不同方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#标签拓展-测试用户网速，根据用户网速给出用户不同方案"}},[t._v("#")]),t._v(" 标签拓展 测试用户网速，根据用户网速给出用户不同方案")]),t._v(" "),e("pre",[e("code",[t._v("var s = new Image()\nvar start = Date.now()\ns.src = 'https://www.baidu.com/haha.gif'\ns.onload = function() {\n var e = Date.now()\n var t = e-s\n var v = 't'+= 'kb/s'\n}\n")])]),t._v(" "),e("h4",{attrs:{id:"一个html元素最少要当3个元素去使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一个html元素最少要当3个元素去使用"}},[t._v("#")]),t._v(" 一个html元素最少要当3个元素去使用")]),t._v(" "),e("p",[t._v("具体关于同源策略请浏览 "),e("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("阮一峰老师同源策略讲解"),e("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=r.exports}}]);