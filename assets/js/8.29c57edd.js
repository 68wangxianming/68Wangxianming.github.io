(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{262:function(t,n,s){t.exports=s.p+"assets/img/1.6cb7a40c.jpg"},263:function(t,n,s){t.exports=s.p+"assets/img/2.8f213908.jpg"},264:function(t,n,s){t.exports=s.p+"assets/img/3.de3c7c03.jpg"},265:function(t,n,s){t.exports=s.p+"assets/img/4.3616d03c.jpg"},266:function(t,n,s){t.exports=s.p+"assets/img/5.4cf34f22.jpg"},267:function(t,n,s){t.exports=s.p+"assets/img/6.3d4eab6c.jpg"},268:function(t,n,s){t.exports=s.p+"assets/img/7.12cc0fe5.jpg"},269:function(t,n,s){t.exports=s.p+"assets/img/8.0acf411b.jpg"},270:function(t,n,s){t.exports=s.p+"assets/img/9.e5a1b4a1.jpg"},271:function(t,n,s){t.exports=s.p+"assets/img/10.5dc9606f.jpg"},272:function(t,n,s){t.exports=s.p+"assets/img/11.0f322c36.jpg"},273:function(t,n,s){t.exports=s.p+"assets/img/12.00b594d4.jpg"},422:function(t,n,s){"use strict";s.r(n);var a=s(0),e=Object(a.a)({},(function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h3",{attrs:{id:"浏览器渲染过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#浏览器渲染过程"}},[t._v("#")]),t._v(" 浏览器渲染过程")]),t._v(" "),a("p",[t._v("https://www.w3.org/TR/navigation-timing/")]),t._v(" "),a("p",[t._v("缓存层：prompt for unload、redirect、App cache\n网络层：DNS、TCP、Request、Response\n渲染层：Processing、onload")]),t._v(" "),a("p",[a("img",{attrs:{src:s(262),alt:"An image"}}),t._v("\nunload是指卸载掉了上一个页面，与重定向是并发的。\nredirect在浏览器缓存中寻找，缓存以索引形式存在。找到页面是否下载过，并且判断文件是否支持脱机浏览。(很早之前浏览器支持脱机浏览)前提文件没有过期\nDNS部分的优化使用CDN\nHttp是基于Tcp和Udp，Tcp是IO传输,每次请求都要握手挥手，所以可以优化，复用连接。\nTCP部分优化由底层程序员处理 HTTP1、2、3 长连接\nTCP secureConnection安全连接时间 https 基于SSL连接所以时间比较长\nRequset->Resopnse之前考虑服务器的性能数据质量等等\nResoponse部分就是压缩 文件类型(text img等速度是不一样的)和压缩之前的权衡\nProcessing domloading先把dom加载都内存里 domInteractive生成dom节点 domcontentloaded内容加载 domcomplete完毕")]),t._v(" "),a("p",[a("img",{attrs:{src:s(263),alt:"An image"}})]),t._v(" "),a("ul",[a("li",[t._v("navigationStart\n加载起始时间")]),t._v(" "),a("li",[t._v("redirectStart\n重定向开始时间（如果发生了HTTP重定向，每次重定向都和当前文档同域的话，就返回开始重定向的fetchStart的值。其他情况，则返回0）")]),t._v(" "),a("li",[t._v("redirectEnd\n重定向结束时间（如果发生了HTTP重定向，每次重定向都和当前文档同域的话，就返回最后一次重定向接受完数据的时间。其他情况则返回0）")]),t._v(" "),a("li",[t._v("fetchStart\n浏览器发起资源请求时，如果有缓存，则返回读取缓存的开始时间")]),t._v(" "),a("li",[t._v("domainLookupStart\n查询DNS的开始时间。如果请求没有发起DNS请求，如keep-alive，缓存等，则返回fetchStart")]),t._v(" "),a("li",[t._v("domainLookupEnd\n查询DNS的结束时间。如果没有发起DNS请求，同上")]),t._v(" "),a("li",[t._v("connectStart\n开始建立TCP请求的时间。如果请求是keep-alive，缓存等，则返回domainLookupEnd")]),t._v(" "),a("li",[t._v("(secureConnectionStart)\n如果在进行TLS或SSL，则返回握手时间")]),t._v(" "),a("li",[t._v("connectEnd\n完成TCP链接的时间。如果是keep-alive，缓存等，同connectStart")]),t._v(" "),a("li",[t._v("requestStart\n发起请求的时间")]),t._v(" "),a("li",[t._v("responseStart\n服务器开始响应的时间")]),t._v(" "),a("li",[t._v("domLoading\n从图中看是开始渲染dom的时间，具体未知")]),t._v(" "),a("li",[t._v("domInteractive\n未知")]),t._v(" "),a("li",[t._v("domContentLoadedEventStart\n开始触发DomContentLoadedEvent事件的时间")]),t._v(" "),a("li",[t._v("domContentLoadedEventEnd\nDomContentLoadedEvent事件结束的时间")]),t._v(" "),a("li",[t._v("domComplete\n从图中看是dom渲染完成时间，具体未知")]),t._v(" "),a("li",[t._v("loadEventStart\n触发load的时间，如没有则返回0")]),t._v(" "),a("li",[t._v("loadEventEnd\nload事件执行完的时间，如没有则返回0")]),t._v(" "),a("li",[t._v("unloadEventStart\nunload事件触发的时间")]),t._v(" "),a("li",[t._v("unloadEventEnd\nunload事件执行完的时间")])]),t._v(" "),a("h4",{attrs:{id:"简单用法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简单用法"}},[t._v("#")]),t._v(" 简单用法")]),t._v(" "),a("p",[t._v("DNS解析时间： domainLookupEnd - domainLookupStart\nTCP建立连接时间： connectEnd - connectStart")]),t._v(" "),a("p",[t._v("白屏时间： responseStart - navigationStart\ndom渲染完成时间： domContentLoadedEventEnd - navigationStart\n页面onload时间： loadEventEnd - navigationStart")]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" timing "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" performance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    start "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" timing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("navigationStart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    dnsTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n    tcpTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    firstPaintTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    domRenderTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    loadTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\ndnsTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" timing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domainLookupEnd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" timing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domainLookupStart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ntcpTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" timing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connectEnd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" timing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connectStart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfirstPaintTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" timing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseStart "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndomRenderTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" timing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domContentLoadedEventEnd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nloadTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" timing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("loadEventEnd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DNS解析时间:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dnsTime "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\nTCP建立时间:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tcpTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\n首屏时间:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" firstPaintTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\ndom渲染完成时间:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" domRenderTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\n页面onload时间:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" loadTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br")])]),a("h3",{attrs:{id:"dns详情"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dns详情"}},[t._v("#")]),t._v(" DNS详情")]),t._v(" "),a("p",[t._v("DNS域名系统，用于讲域名转换成IP,人脑适合文本，机器适合数字。")]),t._v(" "),a("h4",{attrs:{id:"域名解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#域名解析"}},[t._v("#")]),t._v(" 域名解析")]),t._v(" "),a("p",[a("img",{attrs:{src:s(264),alt:"An image"}}),t._v("\n1、客户端\n2、DNS服务器 先看看缓存里有没有 再去找根服务器 根服务器根据后缀 告诉你去那个TLD服务器上找\n3、根服务器 负责维护全球互联网域名的解析 负责协调 （十几台中国一台都没有）告诉你去那个TLD服务器上找\n4、只管顶级域名 告诉你顶级域名是那个服务器维护\n5、具体某个域名解析IP是多少 传给DNS服务器并让之缓存")]),t._v(" "),a("p",[t._v("DNS服务器解析这么复杂，所以很多大厂都会选择把3、4、5的数据镜像下来\n但是换机子A->B就需要重新给镜像备份数据（阿里云配置域名，需要等十几分钟才能生效，因为要同步镜像数据）\n"),a("img",{attrs:{src:s(265),alt:"An image"}})]),t._v(" "),a("h3",{attrs:{id:"tcp三次握手与四次挥手"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tcp三次握手与四次挥手"}},[t._v("#")]),t._v(" TCP三次握手与四次挥手")]),t._v(" "),a("p",[a("img",{attrs:{src:s(266),alt:"An image"}}),t._v("\n从数据发送端开始，应用层到物理层不断加上头（洋葱），到物理层比特流传输 0101\n每一层都要对上一层负责，每一层都要对下一层调用")]),t._v(" "),a("h4",{attrs:{id:"tcp协议模型详解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tcp协议模型详解"}},[t._v("#")]),t._v(" TCP协议模型详解")]),t._v(" "),a("p",[a("img",{attrs:{src:s(267),alt:"An image"}}),t._v("\nTCP头很小几十个字节\n"),a("img",{attrs:{src:s(268),alt:"An image"}}),t._v("\n源端口：Source Port 目的端口Destination Port\n顺序号：Sequence Number 应答号：Acknowledgment Number\nTCP控制指令 Options\n"),a("img",{attrs:{src:s(269),alt:"An image"}}),t._v("\n谁主动找上去谁是客户端，谁等着被连接说是服务器。\nSYN指令填写在options\nseq 顺序号 如果大数据包出错那么数据包就要全部重发，TCP要把大数据把拆成小数据包，小数据包需要有顺序号，服务器接收后要把小数据包组装成大数据包。\nACK应答指令\n"),a("strong",[t._v("建立三次握手")]),t._v("\n1、SYN_SENT->SYN_RCVD SYN seq=x(客户端编号规则)\n2、SYN_RCVD->ESTABLISHED SYN seq=y(服务端编号规则) ACKACK=x(应答客户端那个顺序的包)+1\n3、ACK=y+1\n黑客常用攻击执行1、2但是客户端回应3 导致套接字积累越来越多 残缺连接越来越多\n"),a("strong",[t._v("数据传输")]),t._v("\n进行多次通讯\n1、seq=x+1 ACK=y+1\n2、ACK=x+2\n"),a("strong",[t._v("断开四次挥手")]),t._v("\n正常情况下客户端主动断开连接，异常情况下服务端可以主动断开连接\n1、FIN seq=x+2 ACK=y+1\n2、ACK=x+3\n3、FIN seq=y+1 (半连接状态)\n服务器应答的适合发两个包（先告诉客户端我收到了发送指令）(把没干完的活继续干完 给客户端发送断开请求)\n4、ACK=y+2 客户端向服务器发出确认")]),t._v(" "),a("h3",{attrs:{id:"缓存机制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缓存机制"}},[t._v("#")]),t._v(" 缓存机制")]),t._v(" "),a("p",[a("img",{attrs:{src:s(270),alt:"An image"}}),t._v(" "),a("img",{attrs:{src:s(271),alt:"An image"}}),t._v(" "),a("img",{attrs:{src:s(272),alt:"An image"}}),t._v(" "),a("img",{attrs:{src:s(273),alt:"An image"}}),t._v('\nEtag和Last-Modified区别是，一个是唯一标识(MD5)一个是时间戳\netag: "56d69716-d5"\nlast-modified: Wed, 02 Mar 2016 07:32:38 GMT')])])}),[],!1,null,null,null);n.default=e.exports}}]);